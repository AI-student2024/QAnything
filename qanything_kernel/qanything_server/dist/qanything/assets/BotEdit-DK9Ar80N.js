import{_ as a}from"./bot-avatar-CBCRm2Zm.js";import{u as s}from"./useBots-C0VDmL7J.js";import{r as t,u as e}from"./utils-BazlbssD.js";import{r as i}from"./router-h2WKaX8E.js";import{g as o}from"./index-QxdYnEqj.js";import{d as r,y as l,r as n,a6 as d,a7 as u,a3 as c,z as v,L as m,D as b,G as f,c as p,E as _,F as g,M as k,J as y,N as h,Z as j,$ as x,K as w}from"./index-XFSJnQA8.js";import{S as B}from"./index-BKqeJmg4.js";const I={class:"container"},C={class:"bot-edit"},$={key:0,class:"loading"},E={key:1},L={class:"header"},z=(a=>(j("data-v-f0ffc33e"),a=a(),x(),a))((()=>b("img",{src:a,alt:"avatar"},null,-1))),F={class:"name"},K={class:"tabs"},S=["onClick"],q=w(r({__name:"BotEdit",setup(a){const{getCurrentRoute:r,changePage:j}=i(),{tabIndex:x,curBot:w}=l(s()),{setTabIndex:q,setCurBot:A,setKnowledgeList:D}=s(),G=o().bots,J=[{name:G.edit,value:0},{name:G.publish,value:1}],M=n(null),N=n(!0),P=d(u,{style:{fontSize:"48px"},spin:!0}),Q=async a=>{try{const s=await t(await e.queryBotInfo({bot_id:a}));A(s[0]),(async a=>{try{let s=[...(await t(await e.kbList())).filter((a=>!/.*_FAQ$/.test(a.kb_name)))];s=a&&a.length?s.map((s=>(a.some((a=>a===s.kb_id))?s.state=1:s.state=0,s))):s.map((a=>(a.state=0,a))),D(s)}catch(s){y.error(s.msg||"获取知识库列表失败")}})(s[0].kb_ids),N.value=!1}catch(s){y.error(s.msg||"获取Bot信息失败")}};return function(){const a=r();M.value=a.value.params.botId,Q(M.value)}(),(a,s)=>{var t;const e=B,i=c("router-view");return v(),m("div",I,[b("div",C,[f(N)?(v(),m("div",$,[p(e,{indicator:f(P)},null,8,["indicator"])])):(v(),m("div",E,[b("div",L,[z,b("div",F,_(null==(t=f(w))?void 0:t.bot_name),1),b("div",K,[(v(),m(g,null,k(J,(a=>b("div",{key:a.name,class:h(["tab-item",f(x)===a.value?"tab-active":"",f(w).kb_ids&&f(w).kb_ids.length||1!==a.value?"":"tab-disable"]),onClick:s=>{var t;(1!==(t=a.value)||w.value.kb_ids&&w.value.kb_ids.length)&&x.value!==t&&(q(t),j(0===t?`/bots/${M.value}/edit`:`/bots/${M.value}/publish`))}},_(a.name),11,S))),64))])]),p(i)]))])])}}}),[["__scopeId","data-v-f0ffc33e"]]);export{q as default};
