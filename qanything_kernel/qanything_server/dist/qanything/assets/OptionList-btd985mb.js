import{r as e,aa as t,k as a,ab as l,ac as r,ad as o,l as s,ae as n,af as i,ag as c,d as u,a as d,_ as p,c as v,h as g,F as m,ah as f,i as y,g as h,m as k,j as b,ai as C,u as w,aj as x,ak as S,al as A,q as $,I,a4 as _,o as O,a1 as z,z as j,L as D,K as F,y as E,w as L,G as N,D as M,E as P,C as T,U as W,a0 as R,J as U,A as B,H as V,O as q,a6 as X,V as K,W as Z,B as H,am as Q,Z as J,$ as Y,e as G,T as ee,an as te,M as ae,N as le}from"./index-XFSJnQA8.js";import{r as re,u as oe,d as se,a as ne,b as ie}from"./utils-BazlbssD.js";import{_ as ce,b as ue,a as de,u as pe,c as ve,p as ge}from"./useUploadFiles-DkyoZaiN.js";import{g as me}from"./index-QxdYnEqj.js";import{C as fe}from"./index-C-ZzOSKu.js";import{_ as ye}from"./class-CSb3T_eq.js";import{u as he,a as ke,b as be,M as Ce}from"./useChatSource-UNzIihme.js";import{S as we}from"./index-DxOe7nEl.js";import{L as xe}from"./ChatInfoPanel-BLaqnlFp.js";import{_ as Se,a as Ae}from"./index-BdE43Btm.js";import{_ as $e}from"./ActionButton-Bb8A1Lwz.js";const Ie=["normal","exception","active","success"],_e=()=>({prefixCls:String,type:a(),percent:Number,format:l(),status:a(),showInfo:r(),strokeWidth:Number,strokeLinecap:a(),strokeColor:o(),trailColor:String,width:Number,success:s(),gapDegree:Number,gapPosition:a(),size:n([String,Number,Array]),steps:Number,successPercent:Number,title:String,progressStatus:a()});function Oe(e){return!e||e<0?0:e>100?100:e}function ze(e){let{success:t,successPercent:a}=e,l=a;return t&&"progress"in t&&(i(!1,"Progress","`success.progress` is deprecated. Please use `success.percent` instead."),l=t.progress),t&&"percent"in t&&(l=t.percent),l}const je=(e,t,a)=>{var l,r,o,s;let n=-1,i=-1;if("step"===t){const t=a.steps,l=a.strokeWidth;"string"==typeof e||void 0===e?(n="small"===e?2:14,i=null!=l?l:8):"number"==typeof e?[n,i]=[e,e]:[n=14,i=8]=e,n*=t}else if("line"===t){const t=null==a?void 0:a.strokeWidth;"string"==typeof e||void 0===e?i=t||("small"===e?6:8):"number"==typeof e?[n,i]=[e,e]:[n=-1,i=8]=e}else"circle"!==t&&"dashboard"!==t||("string"==typeof e||void 0===e?[n,i]="small"===e?[60,60]:[120,120]:"number"==typeof e?[n,i]=[e,e]:(n=null!==(r=null!==(l=e[0])&&void 0!==l?l:e[1])&&void 0!==r?r:120,i=null!==(s=null!==(o=e[0])&&void 0!==o?o:e[1])&&void 0!==s?s:120));return{width:n,height:i}};const De=(e,t)=>{const{from:a=c.blue,to:l=c.blue,direction:r=("rtl"===t?"to left":"to right")}=e,o=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(a[l[r]]=e[l[r]])}return a}(e,["from","to","direction"]);if(0!==Object.keys(o).length){return{backgroundImage:`linear-gradient(${r}, ${(e=>{let t=[];return Object.keys(e).forEach((a=>{const l=parseFloat(a.replace(/%/g,""));isNaN(l)||t.push({key:l,value:e[a]})})),t=t.sort(((e,t)=>e.key-t.key)),t.map((e=>{let{key:t,value:a}=e;return`${a} ${t}%`})).join(", ")})(o)})`}}return{backgroundImage:`linear-gradient(${r}, ${a}, ${l})`}},Fe=u({compatConfig:{MODE:3},name:"ProgressLine",inheritAttrs:!1,props:p(p({},_e()),{strokeColor:o(),direction:a()}),setup(e,t){let{slots:a,attrs:l}=t;const r=d((()=>{const{strokeColor:t,direction:a}=e;return t&&"string"!=typeof t?De(t,a):{backgroundColor:t}})),o=d((()=>"square"===e.strokeLinecap||"butt"===e.strokeLinecap?0:void 0)),s=d((()=>e.trailColor?{backgroundColor:e.trailColor}:void 0)),n=d((()=>{var t;return null!==(t=e.size)&&void 0!==t?t:[-1,e.strokeWidth||("small"===e.size?6:8)]})),i=d((()=>je(n.value,"line",{strokeWidth:e.strokeWidth}))),c=d((()=>{const{percent:t}=e;return p({width:`${Oe(t)}%`,height:`${i.value.height}px`,borderRadius:o.value},r.value)})),u=d((()=>ze(e))),f=d((()=>{const{success:t}=e;return{width:`${Oe(u.value)}%`,height:`${i.value.height}px`,borderRadius:o.value,backgroundColor:null==t?void 0:t.strokeColor}})),y={width:i.value.width<0?"100%":i.value.width,height:`${i.value.height}px`};return()=>{var t;return v(m,null,[v("div",g(g({},l),{},{class:[`${e.prefixCls}-outer`,l.class],style:[l.style,y]}),[v("div",{class:`${e.prefixCls}-inner`,style:s.value},[v("div",{class:`${e.prefixCls}-bg`,style:c.value},null),void 0!==u.value?v("div",{class:`${e.prefixCls}-success-bg`,style:f.value},null):null])]),null===(t=a.default)||void 0===t?void 0:t.call(a)])}}});let Ee=0;function Le(e){return+e.replace("%","")}function Ne(e){return Array.isArray(e)?e:[e]}function Me(e,t,a,l){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const o=50-l/2;let s=0,n=-o,i=0,c=-2*o;switch(arguments.length>5?arguments[5]:void 0){case"left":s=-o,n=0,i=2*o,c=0;break;case"right":s=o,n=0,i=-2*o,c=0;break;case"bottom":n=o,c=2*o}const u=`M 50,50 m ${s},${n}\n   a ${o},${o} 0 1 1 ${i},${-c}\n   a ${o},${o} 0 1 1 ${-i},${c}`,d=2*Math.PI*o;return{pathString:u,pathStyle:{stroke:a,strokeDasharray:`${t/100*(d-r)}px ${d}px`,strokeDashoffset:`-${r/2+e/100*(d-r)}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s"}}}const Pe=u({compatConfig:{MODE:3},name:"VCCircle",props:y({gapDegree:Number,gapPosition:{type:String},percent:{type:[Array,Number]},prefixCls:String,strokeColor:{type:[Object,String,Array]},strokeLinecap:{type:String},strokeWidth:Number,trailColor:String,trailWidth:Number,transition:String},{percent:0,prefixCls:"vc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1}),setup(a){Ee+=1;const l=e(Ee),r=d((()=>Ne(a.percent))),o=d((()=>Ne(a.strokeColor))),[s,n]=(()=>{const a=e(new Map);return t((()=>{a.value=new Map})),[e=>t=>{a.value.set(e,t)},a]})();(t=>{const a=e(null);f((()=>{const e=Date.now();let l=!1;t.value.forEach((t=>{const r=(null==t?void 0:t.$el)||t;if(!r)return;l=!0;const o=r.style;o.transitionDuration=".3s, .3s, .3s, .06s",a.value&&e-a.value<100&&(o.transitionDuration="0s, 0s")})),l&&(a.value=Date.now())}))})(n);const i=()=>{const{prefixCls:e,strokeWidth:t,strokeLinecap:n,gapDegree:i,gapPosition:c}=a;let u=0;return r.value.map(((a,r)=>{const d=o.value[r]||o.value[o.value.length-1],p="[object Object]"===Object.prototype.toString.call(d)?`url(#${e}-gradient-${l.value})`:"",{pathString:m,pathStyle:f}=Me(u,a,d,t,i,c);u+=a;const y={key:r,d:m,stroke:p,"stroke-linecap":n,"stroke-width":t,opacity:0===a?0:1,"fill-opacity":"0",class:`${e}-circle-path`,style:f};return v("path",g({ref:s(r)},y),null)}))};return()=>{const{prefixCls:e,strokeWidth:t,trailWidth:r,gapDegree:s,gapPosition:n,trailColor:c,strokeLinecap:u,strokeColor:d}=a,p=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(a[l[r]]=e[l[r]])}return a}(a,["prefixCls","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","strokeColor"]),{pathString:m,pathStyle:f}=Me(0,100,c,t,s,n);delete p.percent;const y=o.value.find((e=>"[object Object]"===Object.prototype.toString.call(e))),h={d:m,stroke:c,"stroke-linecap":u,"stroke-width":r||t,"fill-opacity":"0",class:`${e}-circle-trail`,style:f};return v("svg",g({class:`${e}-circle`,viewBox:"0 0 100 100"},p),[y&&v("defs",null,[v("linearGradient",{id:`${e}-gradient-${l.value}`,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[Object.keys(y).sort(((e,t)=>Le(e)-Le(t))).map(((e,t)=>v("stop",{key:t,offset:e,"stop-color":y[e]},null)))])]),v("path",h,null),i().reverse()])}}}),Te=u({compatConfig:{MODE:3},name:"ProgressCircle",inheritAttrs:!1,props:y(p(p({},_e()),{strokeColor:o()}),{trailColor:null}),setup(e,t){let{slots:a,attrs:l}=t;const r=d((()=>{var t;return null!==(t=e.width)&&void 0!==t?t:120})),o=d((()=>{var t;return null!==(t=e.size)&&void 0!==t?t:[r.value,r.value]})),s=d((()=>je(o.value,"circle"))),n=d((()=>e.gapDegree||0===e.gapDegree?e.gapDegree:"dashboard"===e.type?75:void 0)),i=d((()=>({width:`${s.value.width}px`,height:`${s.value.height}px`,fontSize:.15*s.value.width+6+"px"}))),u=d((()=>{var t;return null!==(t=e.strokeWidth)&&void 0!==t?t:Math.max(3/s.value.width*100,6)})),p=d((()=>e.gapPosition||"dashboard"===e.type&&"bottom"||void 0)),f=d((()=>function(e){let{percent:t,success:a,successPercent:l}=e;const r=Oe(ze({success:a,successPercent:l}));return[r,Oe(Oe(t)-r)]}(e))),y=d((()=>"[object Object]"===Object.prototype.toString.call(e.strokeColor))),h=d((()=>function(e){let{success:t={},strokeColor:a}=e;const{strokeColor:l}=t;return[l||c.green,a||null]}({success:e.success,strokeColor:e.strokeColor}))),k=d((()=>({[`${e.prefixCls}-inner`]:!0,[`${e.prefixCls}-circle-gradient`]:y.value})));return()=>{var t;const r=v(Pe,{percent:f.value,strokeWidth:u.value,trailWidth:u.value,strokeColor:h.value,strokeLinecap:e.strokeLinecap,trailColor:e.trailColor,prefixCls:e.prefixCls,gapDegree:n.value,gapPosition:p.value},null);return v("div",g(g({},l),{},{class:[k.value,l.class],style:[l.style,i.value]}),[s.value.width<=20?v(ye,null,{default:()=>[v("span",null,[r])],title:a.default}):v(m,null,[r,null===(t=a.default)||void 0===t?void 0:t.call(a)])])}}}),We=u({compatConfig:{MODE:3},name:"Steps",props:p(p({},_e()),{steps:Number,strokeColor:n(),trailColor:String}),setup(e,t){let{slots:a}=t;const l=d((()=>Math.round(e.steps*((e.percent||0)/100)))),r=d((()=>{var t;return null!==(t=e.size)&&void 0!==t?t:["small"===e.size?2:14,e.strokeWidth||8]})),o=d((()=>je(r.value,"step",{steps:e.steps,strokeWidth:e.strokeWidth||8}))),s=d((()=>{const{steps:t,strokeColor:a,trailColor:r,prefixCls:s}=e,n=[];for(let e=0;e<t;e+=1){const i=Array.isArray(a)?a[e]:a,c={[`${s}-steps-item`]:!0,[`${s}-steps-item-active`]:e<=l.value-1};n.push(v("div",{key:e,class:c,style:{backgroundColor:e<=l.value-1?i:r,width:o.value.width/t+"px",height:`${o.value.height}px`}},null))}return n}));return()=>{var t;return v("div",{class:`${e.prefixCls}-steps-outer`},[s.value,null===(t=a.default)||void 0===t?void 0:t.call(a)])}}}),Re=new C("antProgressActive",{"0%":{transform:"translateX(-100%) scaleX(0)",opacity:.1},"20%":{transform:"translateX(-100%) scaleX(0)",opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}}),Ue=e=>{const{componentCls:t,iconCls:a}=e;return{[t]:p(p({},b(e)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:e.fontSize,marginInlineEnd:e.marginXS,marginBottom:e.marginXS},[`${t}-outer`]:{display:"inline-block",width:"100%"},[`&${t}-show-info`]:{[`${t}-outer`]:{marginInlineEnd:`calc(-2em - ${e.marginXS}px)`,paddingInlineEnd:`calc(2em + ${e.paddingXS}px)`}},[`${t}-inner`]:{position:"relative",display:"inline-block",width:"100%",overflow:"hidden",verticalAlign:"middle",backgroundColor:e.progressRemainingColor,borderRadius:e.progressLineRadius},[`${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorInfo}},[`${t}-success-bg, ${t}-bg`]:{position:"relative",backgroundColor:e.colorInfo,borderRadius:e.progressLineRadius,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`},[`${t}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:e.colorSuccess},[`${t}-text`]:{display:"inline-block",width:"2em",marginInlineStart:e.marginXS,color:e.progressInfoTextColor,lineHeight:1,whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[a]:{fontSize:e.fontSize}},[`&${t}-status-active`]:{[`${t}-bg::before`]:{position:"absolute",inset:0,backgroundColor:e.colorBgContainer,borderRadius:e.progressLineRadius,opacity:0,animationName:Re,animationDuration:e.progressActiveMotionDuration,animationTimingFunction:e.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${t}-status-exception`]:{[`${t}-bg`]:{backgroundColor:e.colorError},[`${t}-text`]:{color:e.colorError}},[`&${t}-status-exception ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorError}},[`&${t}-status-success`]:{[`${t}-bg`]:{backgroundColor:e.colorSuccess},[`${t}-text`]:{color:e.colorSuccess}},[`&${t}-status-success ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorSuccess}}})}},Be=e=>{const{componentCls:t,iconCls:a}=e;return{[t]:{[`${t}-circle-trail`]:{stroke:e.progressRemainingColor},[`&${t}-circle ${t}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${t}-circle ${t}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:e.colorText,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[a]:{fontSize:e.fontSize/e.fontSizeSM+"em"}},[`${t}-circle&-status-exception`]:{[`${t}-text`]:{color:e.colorError}},[`${t}-circle&-status-success`]:{[`${t}-text`]:{color:e.colorSuccess}}},[`${t}-inline-circle`]:{lineHeight:1,[`${t}-inner`]:{verticalAlign:"bottom"}}}},Ve=e=>{const{componentCls:t}=e;return{[t]:{[`${t}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:e.progressStepMinWidth,marginInlineEnd:e.progressStepMarginInlineEnd,backgroundColor:e.progressRemainingColor,transition:`all ${e.motionDurationSlow}`,"&-active":{backgroundColor:e.colorInfo}}}}}},qe=e=>{const{componentCls:t,iconCls:a}=e;return{[t]:{[`${t}-small&-line, ${t}-small&-line ${t}-text ${a}`]:{fontSize:e.fontSizeSM}}}},Xe=h("Progress",(e=>{const t=e.marginXXS/2,a=k(e,{progressLineRadius:100,progressInfoTextColor:e.colorText,progressDefaultColor:e.colorInfo,progressRemainingColor:e.colorFillSecondary,progressStepMarginInlineEnd:t,progressStepMinWidth:t,progressActiveMotionDuration:"2.4s"});return[Ue(a),Be(a),Ve(a),qe(a)]}));const Ke=$(u({compatConfig:{MODE:3},name:"AProgress",inheritAttrs:!1,props:y(_e(),{type:"line",percent:0,showInfo:!0,trailColor:null,size:"default",strokeLinecap:"round"}),slots:Object,setup(e,t){let{slots:a,attrs:l}=t;const{prefixCls:r,direction:o}=w("progress",e),[s,n]=Xe(r),i=d((()=>Array.isArray(e.strokeColor)?e.strokeColor[0]:e.strokeColor)),c=d((()=>{const{percent:t=0}=e,a=ze(e);return parseInt(void 0!==a?a.toString():t.toString(),10)})),u=d((()=>{const{status:t}=e;return!Ie.includes(t)&&c.value>=100?"success":t||"normal"})),p=d((()=>{const{type:t,showInfo:a,size:l}=e,s=r.value;return{[s]:!0,[`${s}-inline-circle`]:"circle"===t&&je(l,"circle").width<=20,[`${s}-${"dashboard"===t?"circle":t}`]:!0,[`${s}-status-${u.value}`]:!0,[`${s}-show-info`]:a,[`${s}-${l}`]:l,[`${s}-rtl`]:"rtl"===o.value,[n.value]:!0}})),m=d((()=>"string"==typeof e.strokeColor||Array.isArray(e.strokeColor)?e.strokeColor:void 0));return()=>{const{type:t,steps:n,title:c}=e,{class:d}=l,f=function(e,t){var a={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(a[l[r]]=e[l[r]])}return a}(l,["class"]),y=(()=>{const{showInfo:t,format:l,type:o,percent:s,title:n}=e,i=ze(e);if(!t)return null;let c;const d=l||(null==a?void 0:a.format)||(e=>`${e}%`),p="line"===o;return l||(null==a?void 0:a.format)||"exception"!==u.value&&"success"!==u.value?c=d(Oe(s),Oe(i)):"exception"===u.value?c=v(p?x:S,null,null):"success"===u.value&&(c=v(p?A:fe,null,null)),v("span",{class:`${r.value}-text`,title:void 0===n&&"string"==typeof c?c:void 0},[c])})();let h;return"line"===t?h=n?v(We,g(g({},e),{},{strokeColor:m.value,prefixCls:r.value,steps:n}),{default:()=>[y]}):v(Fe,g(g({},e),{},{strokeColor:i.value,prefixCls:r.value,direction:o.value}),{default:()=>[y]}):"circle"!==t&&"dashboard"!==t||(h=v(Te,g(g({},e),{},{prefixCls:r.value,strokeColor:i.value,progressStatus:u.value}),{default:()=>[y]})),s(v("div",g(g({role:"progressbar"},f),{},{class:[p.value,d],title:c}),[h]))}}}));var Ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};function He(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){Qe(e,t,a[t])}))}return e}function Qe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Je=function(e,t){var a=He({},e,t.attrs);return v(I,He({},a,{icon:Ze}),null)};Je.displayName="MinusCircleOutlined",Je.inheritAttrs=!1;var Ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};function Ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){et(e,t,a[t])}))}return e}function et(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var tt=function(e,t){var a=Ge({},e,t.attrs);return v(I,Ge({},a,{icon:Ye}),null)};tt.displayName="PlusCircleOutlined",tt.inheritAttrs=!1;const at=_("useChunkView",(()=>({showChunkModel:e(!1)}))),lt=F(u({__name:"LoadingImg",setup(t){const a=e();return O((()=>{a.value&&a.value.classList.add("loading")})),z((()=>{a.value&&a.value.classList.remove("loading")})),(e,t)=>(j(),D("img",{ref_key:"loadingRef",ref:a,class:"img",src:ce,alt:"loading"},null,512))}}),[["__scopeId","data-v-e69df7ef"]]),rt={key:0,class:"container"},ot={class:"title"},st={class:"multi-color-progress"},nt={class:"progress-outer"},it={class:"progress"},ct={class:"percent"},ut={class:"percent-text"},dt=F(u({__name:"UploadProgress",setup(t){const{dataSource:a,totalStatus:l,kbTotal:r}=E(ue()),o=me().progress,s=e({green:0,yellow:0,red:0,gray:0}),n=e({green:0,yellow:0,red:0,gray:0}),i=e({green:0,yellow:0,red:0,gray:0});return L((()=>l),(()=>{(()=>{s.value=l.value;for(const t in s.value){const e=s.value[t]/r.value*100;n.value[t]=parseFloat(e.toFixed(2))}const e=100-Object.values(n.value).reduce(((e,t)=>e+t),0);e>0&&(n.value.gray+=e),i.value.green=n.value.green,i.value.red=n.value.red+i.value.green,i.value.yellow=n.value.yellow+i.value.red,i.value.gray=n.value.gray+i.value.yellow})()}),{immediate:!0,deep:!0}),(e,t)=>{const l=Ke,r=ye;return 0!==N(a).length?(j(),D("div",rt,[M("span",ot,P(N(o).uploadTotalProgress)+"：",1),v(r,{title:`${N(o).putStorage}: ${N(s).green},\n      ${N(o).inLine}: ${N(s).gray},\n      ${N(o).parsing}: ${N(s).yellow},\n      ${N(o).failure}: ${N(s).red}`},{default:T((()=>[M("div",st,[M("div",nt,[M("div",it,[v(l,{percent:N(i).green,class:"progress-segment green",status:"active","stroke-color":"#52c41a"},null,8,["percent"]),v(l,{percent:N(i).red,class:"progress-segment red",status:"active","stroke-color":"#f5222d"},null,8,["percent"]),v(l,{percent:N(i).yellow,class:"progress-segment yellow",status:"active","stroke-color":"#FFEB3B"},null,8,["percent"]),v(l,{percent:N(i).gray,class:"progress-segment gray",status:"active","stroke-color":"#bfbfbf"},null,8,["percent"])])]),M("div",ct,[M("div",ut,P((N(n).green+N(n).red).toFixed(2))+"% ",1)])])])),_:1},8,["title"])])):W("",!0)}}}),[["__scopeId","data-v-742741e5"]]),pt={class:"container"},vt={class:"scale"},gt={class:"scale-text"},mt={class:"file-preview-content"},ft=(e=>(J("data-v-f053baeb"),e=e(),Y(),e))((()=>M("div",{class:"resize-handle"},null,-1))),yt={class:"export"},ht={style:{color:"#666","user-select":"text"}},kt={class:"file-path"},bt={key:1},Ct=["innerHTML"],wt={key:2,class:"editable-row-operations"},xt={key:0,class:"operation-div"},St={class:"footer"},At=F(u({__name:"ChunkViewDialog",props:{kbId:{},fileId:{},fileName:{}},setup(t){const{showChunkModel:a}=E(at()),{common:l}=me(),{chatSettingFormActive:r}=E(he()),{setSourceType:o,setSourceUrl:s,setTextContent:n}=ke(),i=t,{kbId:c,fileId:u,fileName:d}=R(i),p=e([{title:"编号",key:"id",dataIndex:"id",width:70},{title:"markdown预览",key:"content",dataIndex:"content",resizable:!0,width:150,minWidth:150},{title:"分析结果",key:"editContent",dataIndex:"editContent",resizable:!0,width:150,minWidth:150},{title:"操作",key:"operation",dataIndex:"operation",width:100}]),g=e(new Map),m=e=>{const t=e.key,a=e.content;g.value.has(t)?g.value.delete(t):g.value.set(t,a)},f=(...e)=>{e[2].map((e=>{const t=e.key,a=e.content;g.value.has(t)?g.value.delete(t):g.value.set(t,a)}))},y=()=>{let e="";[...g.value.values()].map((t=>{e+=t+"\n\n"})),h(e)},h=e=>{try{const t="output.txt",a=new File([e],t,{type:"text/plain;charset=utf-8"}),l=URL.createObjectURL(a);se(l,t),g.value.clear()}catch(t){U.error("download error")}},k=e(!1),b=e(!1),C=e({pageNum:1,pageSize:5,total:0,showSizeChanger:!1,showTotal:e=>`共 ${e} 条`}),w=e=>{C.value.pageNum=e.current,F(c.value,u.value)},x=e([]),S=e({}),A=e(1),$=e(""),I=()=>{a.value=!1,!b&&(S.value={})},_=e(1),O=()=>{_.value+=.1},z=()=>{_.value<=.15||(_.value-=.1)},F=async(e,t)=>{k.value=!0;try{const a=await re(await oe.getDocCompleted({kb_id:e,file_id:t,page_id:C.value.pageNum,page_limit:C.value.pageSize}));A.value=(C.value.pageNum-1)*C.value.pageSize+1,C.value.total=a.total_count,x.value=[],$.value=a.file_path,a.chunks.forEach((e=>{x.value.push({key:e.chunk_id,id:A.value++,content:e.page_content,editContent:e.page_content})}))}catch(a){U.error(a.msg||"获取文档解析结果失败")}finally{k.value=!1}};L((()=>a.value),(()=>{a.value?(x.value=[],F(c.value,u.value),Y({file_id:u.value,file_name:d.value})):a.value||(_.value=1,x.value=[],A.value=1,C.value.pageNum=1,C.value.total=1,s(""),n(""),g.value.clear())}));let J=["pdf","docx","xlsx","txt","md","jpg","png","jpeg","csv","eml"];const Y=e=>{(e=>{if(!e)return!1;const t=e.split(".");if(t.length){const e=t.pop();return!!J.includes(e)}return!1})(e.file_name)&&async function(e){try{s(null);const t=await re(await oe.getFile({file_id:e.file_id})),a=e.file_name.split(".").pop(),l=function(e){const t=J.indexOf(e);return G[t]}(a);if(o(a),s(`data:${l};base64,${t.file_base64}`),"txt"===a||"md"===a||"csv"===a||"eml"===a){const e=atob(t.file_base64),a=decodeURIComponent(escape(e));n(a)}}catch(t){U.error(t.msg||"获取文件失败")}}(e)};let G=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","text/markdown","image/jpeg","image/png","image/jpeg","text/csv","message/rfc822","application/vnd.openxmlformats-officedocument.presentationml.presentation"];const ee=e(null),te=e(0),ae=(e,t)=>{te.value=ee.value.clientWidth;const a=e<t.width?"left":"right";(document.querySelector(".chunk-table").querySelector('.ant-table-cell[colstart="3"]').clientWidth>150||"left"===a)&&(t.width=e)},le=e(!1),ne=e(0),ie=e(0),ce=e("40%"),ue=e=>{e.target.classList.contains("resize-handle")&&(le.value=!0,ne.value=e.clientX,ie.value=e.target.parentElement.offsetWidth,window.addEventListener("mousemove",de),window.addEventListener("mouseup",pe))},de=e=>{if(le.value){const t=e.clientX-ne.value;(e=>{e>=300&&(ce.value=`${e}px`)})(ie.value+t)}},pe=()=>{le.value&&(le.value=!1,window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",pe))};return(e,t)=>{const o=H,s=ye,n=$e,i=xe,c=Se,u=Ce,d=Q;return j(),B(Z,{to:"body"},[v(d,{theme:{token:{colorPrimary:"#5a47e5"}}},{default:T((()=>[v(u,{open:N(a),"onUpdate:open":t[0]||(t[0]=e=>V(a)?a.value=e:null),title:"切片分析结果",centered:"",width:"100%","wrap-class-name":"chunk-modal","destroy-on-close":"",footer:null,onCancel:I},{default:T((()=>[M("div",pt,[M("div",{class:"file-preview",style:q({width:N(ce)}),onMousedown:ue},[M("div",vt,[v(o,{shape:"circle",icon:X(N(tt)),onClick:O},null,8,["icon"]),M("span",gt,P((100*N(_)).toFixed(0))+"%",1),v(o,{shape:"circle",icon:X(N(Je)),onClick:z},null,8,["icon"])]),M("div",mt,[v(we,{"zoom-level":N(_)},null,8,["zoom-level"])]),ft],36),M("div",{ref_key:"tableDomRef",ref:ee,class:"chunk-table"},[M("div",yt,[v(s,{color:"#fff",placement:"bottom"},{title:T((()=>[M("span",ht,P(N($)),1)])),default:T((()=>[M("span",kt,"文件与解析结果所在目录: "+P(N($)),1)])),_:1}),v(o,{type:"primary",onClick:y},{default:T((()=>[K(" 导出选中("+P(N(g).size)+") ",1)])),_:1})]),v(c,{columns:N(p),"data-source":N(x),bordered:"",scroll:{y:"calc(100vh - 32px - 40px - 42px - 64px - 56px - 42px - 48px)"},pagination:N(C),loading:N(k),"row-selection":{selectedRowKeys:[...N(g).keys()],onSelect:m,onSelectAll:f},onChange:w,onResizeColumn:ae},{bodyCell:T((({column:e,record:t})=>{return["content"===e.dataIndex?(j(),B(be,{key:0,content:N(S)[t.key]?N(S)[t.key].editContent:t.content},null,8,["content"])):W("",!0),"editContent"===e.dataIndex?(j(),D("div",bt,[N(S)[t.key]?(j(),B(n,{key:0,value:N(S)[t.key][e.dataIndex],"onUpdate:value":a=>N(S)[t.key][e.dataIndex]=a,style:{margin:"-5px 0"},"show-count":"","auto-size":""},null,8,["value","onUpdate:value"])):(j(),D("div",{key:1,innerHTML:(a=t.content,a.replace(/\n/g,"<br />"))},null,8,Ct))])):"operation"===e.dataIndex?(j(),D("div",wt,[N(S)[t.key]?(j(),D("div",xt,[v(o,{class:"operation-btn",size:"small",loading:N(b),type:"link",onClick:e=>(async e=>{b.value=!0,U.warn("正在更新……");try{await re(await oe.updateDocCompleted({chunk_size:r.value.chunkSize,doc_id:e,update_content:S.value[e].editContent})),U.success("修改成功"),Object.assign(x.value.filter((t=>e===t.key))[0],S[e]),delete S.value[e]}catch(t){U.error(t.msg)}finally{b.value=!1}})(t.key)},{default:T((()=>[K(P(N(b)?"":N(l).save),1)])),_:2},1032,["loading","onClick"]),N(b)?W("",!0):(j(),B(o,{key:0,class:"operation-btn",size:"small",loading:N(b),type:"text",onClick:e=>{return a=t.key,void delete S.value[a];var a}},{default:T((()=>[K(P(N(l).cancel),1)])),_:2},1032,["loading","onClick"]))])):(j(),B(i,{key:1,onClick:e=>{return a=t.key,void(S.value[a]=JSON.parse(JSON.stringify(x.value.filter((e=>a===e.key))[0])));var a}},{default:T((()=>[K(P(N(l).edit),1)])),_:2},1032,["onClick"]))])):W("",!0)];var a})),_:1},8,["columns","data-source","scroll","pagination","loading","row-selection"])],512)]),M("div",St,[v(o,{type:"primary",onClick:I},{default:T((()=>[K(P(N(l).close),1)])),_:1})])])),_:1},8,["open"])])),_:1})])}}}),[["__scopeId","data-v-f053baeb"]]),$t={class:"file"},It={class:"box"},_t={class:"before-upload-box"},Ot=["accept"],zt={class:"before-upload"},jt={class:"upload-text-box"},Dt={class:"upload-text"},Ft={class:"blue"},Et={class:"desc"},Lt=F(u({__name:"FileUploadDialog",props:{dialogType:{type:Number,require:!0,default:0}},setup(t){const a=me().common,{setKnowledgeName:l,setModalVisible:r}=de(),{setDefault:o}=pe(),{getDetails:s}=ue(),{modalVisible:n,modalTitle:i}=E(de()),{currentId:c,currentKbName:u}=E(pe()),{uploadFileList:p,uploadFileListQuick:g}=E(ve()),{initUploadFileList:m}=ve(),{chatSettingFormActive:f}=E(he()),y=t,h=e(),k=d((()=>c.value.length>0&&p.value.length>0&&p.value.every((e=>"loading"!=e.status))));L((()=>n.value),(()=>{l(u.value),1===y.dialogType&&(p.value=g.value),n.value||0!==y.dialogType||m()}));const b=[".md",".txt",".pdf",".jpg",".png",".jpeg",".docx",".xlsx",".pptx",".eml",".csv"],C={document:31457280,image:5242880},w=e=>{const t=e.target.files;let l=0;Array.from(t).forEach((e=>{l+=e.size,l>=131072e3&&U.error("文件总大小超过125MB")})),Array.from(t).forEach((async(e,t)=>{try{await(async(e,t)=>new Promise(((l,r)=>{if(e.name&&b.includes("."+e.name.split(".").pop().toLowerCase())){const o=e.type.startsWith("image/")?C.image:C.document,s=e.type.startsWith("image/")?"图片":"文档";if(e.size>o)return void r(`单个${s}太大，不能超过 ${o/1024/1024} MB`);p.value.push({file_name:e.name,file:e,status:"loading",text:a.uploading,file_id:"",order:p.value.length,bytes:0}),l(t)}else r(`${e.name}的文件格式不符`)})))(e,t)}catch(l){U.error(l)}})),setTimeout((()=>{p.value.length&&x()}))},x=async()=>{var e;$();const t=[];p.value.forEach((e=>{"loading"==e.status&&t.push(e)}));const l=new FormData;for(let a=0;a<t.length;a++)l.append("files",null==(e=t[a])?void 0:e.file);l.append("kb_id",c.value),l.append("user_id",ne),l.append("chunk_size",f.value.chunkSize.toString()),l.append("mode","soft"),S(0),fetch(ie+"/local_doc_qa/upload_files",{method:"POST",body:l}).then((e=>{if(e.ok)return e.json();throw new Error("上传失败")})).then((e=>{if(200===e.code){if(0===e.data.length)return U.warn(e.msg||"出错了"),te.close("upload"),void(1===y.dialogType&&t.forEach((t=>{p.value[t.order].status="error",p.value[t.order].errorText=(null==e?void 0:e.msg)||a.upFailed})));S(1),1===y.dialogType&&t.forEach(((t,l)=>{let r=e.data[l].status;r="green"==r||"gray"==r?"success":"error",p.value[t.order].status=r,p.value[t.order].file_id=e.data[l].file_id,p.value[t.order].bytes=e.data[l].bytes,p.value[t.order].errorText=a.upSucceeded}))}else U.error(e.msg||"出错了"),te.close("upload"),t.forEach((t=>{p.value[t.order].status="error",p.value[t.order].errorText=(null==e?void 0:e.msg)||a.upFailed}))})).catch((e=>{U.error(e.msg||"出错了"),te.close("upload")})).finally((()=>{s()}))},S=e=>{te[e?"success":"info"]({key:"upload",message:e?"上传完成":"上传中",description:e?"":"最多需要30s",duration:e?2.5:0})},A=async()=>{r(!1),o(ge.optionlist),await s()},$=()=>{r(!1)};return G((()=>{h.value&&clearTimeout(h.value)})),(e,t)=>{const l=H,r=Ce;return j(),B(Z,{to:"body"},[v(r,{open:N(n),"onUpdate:open":t[1]||(t[1]=e=>V(n)?n.value=e:null),title:N(i),centered:"",width:"480px","wrap-class-name":"upload-file-modal","destroy-on-close":""},{footer:T((()=>[0===y.dialogType?(j(),B(l,{key:"submit",type:"primary",class:"upload-btn",disabled:!N(k),onClick:A},{default:T((()=>[K(P(N(a).confirm),1)])),_:1},8,["disabled"])):W("",!0),1===y.dialogType?(j(),B(l,{key:"submit",type:"primary",class:"upload-btn",onClick:$},{default:T((()=>[K(P(N(a).cancel),1)])),_:1})):W("",!0)])),default:T((()=>[M("div",$t,[M("div",It,[M("div",_t,[M("input",{class:"hide input",type:"file",accept:b.join(","),multiple:"",onChange:w,onClick:t[0]||(t[0]=e=>e.target.value="")},null,40,Ot),M("div",zt,[M("div",jt,[v(ee,{name:"upload"}),M("p",null,[M("span",Dt,[K(P(N(a).dragUrl)+" ",1),M("span",Ft,P(N(a).click),1)])])]),M("p",Et,P(N(a).updesc1),1)])])])])])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-14f8a744"]]),Nt=e=>(J("data-v-46e023db"),e=e(),Y(),e),Mt={class:"list-page"},Pt={class:"content"},Tt={class:"options"},Wt=Nt((()=>M("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAKFSURBVFiF1ZjNattAEIC/VH0Ag3O3wb0b+gKF0HMCfoAW/AAFP0ALaZ8guffQvoFzzsF5hNwLUu4F+Q2mB+1Yk9XfriTXycAiWdbufDuz2p2ZMxFJeMHy5tQAXfJ2YP8J8AGYufuZe/4E7N31wd3/N8AJ8Am4Apbud5dsgTvgV6yys8g1+AX4ZqD2wKNrajEoLbqksLBKBvyIAhWRJKC9F5FUStmJyEpEpgF9p+7dnemfisgiRHcI4FpEcgN2ETipprF0orkDHwR4bWZ9MwDMbzdm3Ou+gCszyGZEuLrJr2MBF1K6tXWGA9vG6cilWOfBgKnrOKZbu9ydhgKu2zoEtoWzTshXnkj5hVeWUh2gWq9xXQTA6Riha/fCvZ/7k/IB1Xq7EeDSCAs2WtEPFi7d9Tb8cDnIHLh31wz4SNwZrDqv7EN71E2Av+7+PHLwOrgsor/q/+Pu36l+a0E9M2OjjzHgoDzXNULCB9RQ6fEEcCqq+xAhWUAboZwCzupWY9Va8Ikw+cm4cFZ3LWCszLpfGS4WsELfIWq1OaWrh0rFixZQ/R8SwsNz184ZB7LyHdRZcBkxYMa4kKr7YEF/o65slIFi4TL6b9SVg8J3cWWjDBQLZWFjRHVuaXCx/glF9hYrGcMgVefds6deRDGVMpLumxz1CbcaY9C6eFDD8L4hl040JmDVCVVi0FcZ8idSJDDq6mNkdNo0s8ulIZFvSzt1XYgcJ7PbmPEbE/hXnbhrW0np7lT6J1OJFDuD5h55yFihxaOFjF88qk3U/RZbfvsMfPU24Afay2+2hrgHvhORlMUCWtBLvAysQfQI3QK/iay29gVUaSsBaxl4UAl4KODR5cVX+f8BBZDb8KKHVtYAAAAASUVORK5CYII=",alt:"back"},null,-1))),Rt={class:"kb-name"},Ut={class:"name"},Bt={class:"id"},Vt={class:"nav-info"},qt={class:"navs"},Xt=["onClick"],Kt={key:0,class:"nav-progress"},Zt={class:"handle-btn"},Ht={class:"table"},Qt=Nt((()=>M("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAP5JREFUOE+tlNENgzAMRM1khY28QcsG3qgwWauz4ujiJKBKzRcY5+U421nkT2uZcVR1FZEnfT/xbGav0Z4ONADsIgIo1qM87xnYgFQVp0FFlxgqZjkVRAmbmR3YSDG8Ax5xKHyLSM1l0IeV0C/CGwCwsSothzzMbMOhDsrBEouNrK4xW1VrDoNy0hq/QmDkuIIcCxDI56y0I8UF5C0COIOqmdwn4RUrSRV0nxjUyB4l50YsSt2SAFWJk+SD/UoeuSVc/kufJgfAH2cwqGsyqkxTiOJb01e3I1I2oRV8WG9HZDBLaESf+NLZfBN0Fb66RuK6wMTHGrZI41E289f3L/XxvhPPyll2AAAAAElFTkSuQmCC",style:{width:"18px","margin-left":"5px"},alt:"©"},null,-1))),Jt={style:{color:"#666","user-select":"text"}},Yt={key:1,class:"status-box"},Gt={class:"icon-file-status"},ea={key:0},ta={key:1},aa={key:0,class:"status-box"},la={class:"icon-file-status"},ra={key:1,class:"options"},oa=F(u({__name:"OptionList",setup(t){const{setDefault:a}=pe(),{currentKbName:l,currentId:r}=E(pe()),{setModalVisible:o,setUrlModalVisible:s,setModalTitle:n}=de(),{showChunkModel:i}=E(at()),{getDetails:c,setEditQaSet:u,setEditModalVisible:p,getFaqList:g,setFaqType:f,setPageNum:y,setKbPageNum:h}=ue(),{dataSource:k,faqList:b,timer:C,faqTimer:w,total:x,pageNum:S,pageSize:A,loading:$,kbTotal:I,kbPageNum:_,kbPageSize:O}=E(ue()),z=me().home,F=me().common,R=me().bots,V=e(0),q=[{name:z.docSet,value:0},{name:z.qaSet,value:1}],Z=[{title:z.documentId,dataIndex:"fileId",key:"fileId",width:"11%"},{title:z.documentName,dataIndex:"fileIdName",key:"fileIdName",width:"20%",ellipsis:!0},{title:z.documentStatus,dataIndex:"status",key:"status",width:"15%",ellipsis:!0},{title:z.fileSize,dataIndex:"bytes",key:"bytes",width:"10%"},{title:z.contentLength,dataIndex:"contentLength",key:"contentLength",width:"10%"},{title:z.creationDate,dataIndex:"createtime",key:"createtime",width:"11%"},{title:z.remark,dataIndex:"remark",key:"remark",width:"15%"},{title:z.operate,key:"options",width:"10%"}],Q=[{title:"ID",dataIndex:"id",key:"id",width:"8%"},{title:z.question,dataIndex:"question",key:"question",width:"43%",ellipsis:!0},{title:z.status,dataIndex:"status",key:"status",width:"10%",ellipsis:!0},{title:z.characterCount,dataIndex:"bytes",key:"bytes",width:"10%"},{title:z.creationDate,dataIndex:"createtime",key:"createtime",width:"11%"},{title:z.operate,key:"options",width:"10%"}],J=d((()=>({current:_.value,pageSize:O.value,total:I.value,showSizeChanger:!1,showTotal:e=>`共 ${e} 条`}))),Y=d((()=>({current:S.value,pageSize:A.value,total:x.value,showSizeChanger:!1,showTotal:e=>`共 ${e} 条`})));let te={};const se=e(""),ne=e(""),ie=async()=>{try{await re(await oe.deleteFile({file_ids:[te.fileId],kb_id:r.value})),U.success("删除成功"),await c(),1!==_.value&&0===k.value.length&&(_.value-=1,await c())}catch(e){U.error(e.msg||"删除失败")}};let ce={};const ve=async()=>{try{await re(await oe.deleteFile({kb_id:`${r.value}_FAQ`,file_ids:[ce.faqId]})),U.success("删除成功"),await g(),1!==S.value&&0===b.value.length&&(S.value-=1,await g())}catch(e){U.error(e.msg||"删除失败")}},fe=()=>{a(ge.normal)},he=()=>{o(!0),n(z.upload)},ke=()=>{s(!0),n(F.addUrl)},be=()=>{f("upload"),p(!0)},we=()=>{Ce.confirm({title:z.clearAllFile,content:X("p",z.clearAllFileConfirm),centered:!0,maskClosable:!0,okText:F.confirm,okType:"danger",async onOk(){try{await re(await oe.clearUpload({status:"gray",kb_ids:[]})),U.success("操作成功"),c()}catch(e){U.error(e.msg||"操作失败")}}})},xe=e=>{let t;switch(e){case"gray":t=F.inLine;break;case"yellow":t=F.parsing;break;case"green":t=F.succeeded;break;default:t=F.failed}return t},$e=e=>{let t=F.failed;switch(e){case"gray":t=F.uploadCompleted;break;case"yellow":t=F.inLine;break;case"green":t=F.learningCompleted}return t},Ie=async()=>{if(!(await(async()=>{try{if((await re(await oe.kbList())).find((e=>e.kb_id===`${r.value}_FAQ`)))return!0}catch(e){return U.error(e.msg||F.error),!0}return!1})())){try{await re(await oe.createKb({kb_name:`${l.value}_FAQ`,kb_id:`${r.value}_FAQ`}))}catch(e){return U.error(e.msg||F.error),!1}return!0}},_e=e=>{const{current:t}=e;y(t),g()},Oe=e=>{h(e.current),c()};return L(r,(()=>{V.value=0,h(1),y(1),c()}),{immediate:!0}),G((()=>{clearTimeout(C.value),clearTimeout(w.value),h(1),y(1)})),(e,t)=>{const a=H,o=ye,s=ee,n=Ae,d=Se;return j(),D(m,null,[M("div",Mt,[M("div",Pt,[M("div",Tt,[M("div",{class:"to-chat",onClick:fe},[Wt,M("span",null,P(N(z).conversation),1)]),M("p",Rt,[M("span",Ut,P(N(l).slice(0,15)),1),M("span",Bt,P(N(z).knowledgeID)+" "+P(N(r))+P(1===N(V)?"_FAQ":""),1)])]),M("div",Vt,[M("div",qt,[(j(),D(m,null,ae(q,(e=>M("div",{key:e.name,class:le(["nav-item",N(V)===e.value?"nav-item-active":""]),onClick:t=>{return a=e.value,V.value=a,void(0===a?(h(1),clearTimeout(w.value),c()):(y(1),clearTimeout(C.value),g(),Ie()));var a}},P(e.name),11,Xt))),64))]),0===N(V)?(j(),D("div",Kt,[v(dt,{"data-source":N(k)},null,8,["data-source"])])):W("",!0),M("div",Zt,[0===N(V)?(j(),B(a,{key:0,danger:"",class:"clear-upload",onClick:we},{default:T((()=>[K(P(N(z).clearAllFile),1)])),_:1})):W("",!0),0===N(V)?(j(),B(a,{key:1,class:"upload",onClick:he},{default:T((()=>[K(P(N(z).upload),1)])),_:1})):W("",!0),0===N(V)?(j(),B(a,{key:2,class:"add-link",onClick:ke},{default:T((()=>[K(P(N(z).addUrl),1)])),_:1})):W("",!0),1===N(V)?(j(),B(a,{key:3,class:"upload",onClick:be},{default:T((()=>[K(P(N(z).inputQa),1)])),_:1})):W("",!0)])]),M("div",Ht,[0===N(V)?(j(),B(d,{key:0,"data-source":N(k),columns:Z,pagination:N(J),locale:{emptyText:N(z).emptyText},"hide-on-single-page":!0,"show-size-changer":!1,onChange:Oe},{headerCell:T((({column:e})=>["status"===e.key?(j(),D(m,{key:0},[M("span",null,P(N(z).documentStatus),1),v(o,{color:"#5a47e5"},{title:T((()=>[K(P(N(z).documentStatusNode),1)])),default:T((()=>[Qt])),_:1})],64)):W("",!0)])),bodyCell:T((({column:e,record:t})=>["fileIdName"===e.key?(j(),B(o,{key:0,color:"#fff"},{title:T((()=>[M("span",Jt,P(t.fileIdName),1)])),default:T((()=>[M("span",null,P(t.fileIdName),1)])),_:2},1024)):"status"===e.key?(j(),D("div",Yt,[M("span",Gt,["gray"===t.status||"yellow"===t.status?(j(),B(lt,{key:0,class:"file-status"})):(j(),B(s,{key:1,class:"file-status",name:"green"===t.status?"success":"error"},null,8,["name"]))]),M("span",null,P(xe(t.status)),1)])):"remark"===e.key?(j(),D(m,{key:2},["string"==typeof t.remark?(j(),D("div",ea,P(t.remark),1)):(j(),D("div",ta,[(j(!0),D(m,null,ae(t.remark,((e,t)=>(j(),D("p",{key:t},P(`${t}: ${e}`),1)))),128))]))],64)):"options"===e.key?(j(),D(m,{key:3},[v(n,{"overlay-class-name":"del-pop",placement:"topRight",title:N(F).deleteTitle,"ok-text":N(F).confirm,"cancel-text":N(F).cancel,onConfirm:ie},{default:T((()=>[v(a,{type:"text",class:"delete-item",onClick:e=>{te=t}},{default:T((()=>[K(P(N(F).delete),1)])),_:2},1032,["onClick"])])),_:2},1032,["title","ok-text","cancel-text"]),v(a,{type:"text",class:"view-item",disabled:!("green"===t.status),onClick:e=>(async e=>{se.value=e.fileId,ne.value=e.fileIdName,i.value=!0})(t)},{default:T((()=>[K(P(N(F).view),1)])),_:2},1032,["disabled","onClick"])],64)):W("",!0)])),_:1},8,["data-source","pagination","locale"])):(j(),B(d,{key:1,"data-source":N(b),columns:Q,locale:{emptyText:N(z).emptyText},loading:N($),pagination:N(Y),onChange:_e},{bodyCell:T((({column:e,record:t})=>["status"===e.key?(j(),D("div",aa,[M("span",la,["gray"===t.status||"yellow"===t.status?(j(),B(lt,{key:0,class:"file-status"})):(j(),B(s,{key:1,class:"file-status",name:"green"===t.status?"success":"error"},null,8,["name"]))]),M("span",null,P($e(t.status)),1)])):"options"===e.key?(j(),D("div",ra,[v(a,{class:"edit-item",type:"link",disabled:"green"!==t.status,onClick:e=>{return a=t,f("edit"),u(a),void p(!0);var a}},{default:T((()=>[K(P(N(R).edit),1)])),_:2},1032,["disabled","onClick"]),v(n,{"overlay-class-name":"qa-del-pop",placement:"topRight",title:N(z).deleteQaSetText,"ok-text":N(F).confirm,"cancel-text":N(F).cancel,onConfirm:ve},{default:T((()=>[v(a,{class:"delete-item",danger:"",type:"link",onClick:e=>{ce=t}},{default:T((()=>[K(P(N(F).delete),1)])),_:2},1032,["onClick"])])),_:2},1032,["title","ok-text","cancel-text"])])):W("",!0)])),_:1},8,["data-source","locale","loading","pagination"]))])])]),v(At,{"kb-id":N(r),"file-id":N(se),"file-name":N(ne)},null,8,["kb-id","file-id","file-name"]),v(Lt,{"dialog-type":0})],64)}}}),[["__scopeId","data-v-46e023db"]]);export{Lt as F,lt as L,oa as O,Ke as _};
