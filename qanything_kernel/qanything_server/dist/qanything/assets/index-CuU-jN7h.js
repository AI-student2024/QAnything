import{u as ot,H as At}from"./Head-CeKCpdOm.js";import{r as Q,u as q,a as $t,b as Et}from"./utils-Ugh35qEN.js";import{u as X,a as me,p as Le,b as Ee,_ as It,f as Mt,c as Ye}from"./useUploadFiles-DgMSXBZV.js";import{g as H,u as Rt}from"./index-Ck4zvxVH.js";import{g as nt,m as st,_ as V,d as T,c as g,u as Ce,r as N,p as at,a as re,I as lt,i as Bt,s as ae,w as ge,o as Lt,b as Ne,e as je,f as se,P as J,t as We,h as Nt,j as Ie,k as Pt,l as it,F as te,n as Ft,q as Ot,v as zt,x as F,y as $,z as Y,A,B as _,C as E,D as d,E as ee,G as P,H as j,J as L,K as le,L as ie,M as rt,N as Me,O as Re,Q as Xe,S as ce,R as ct,T as K,U as ue,V as Tt,W as ut,X as Pe,Y as Fe,Z as Dt,$ as Ut,a0 as Ht,a1 as Vt}from"./index-CVjowkL6.js";import{L as Ze,I as de,_ as dt}from"./ActionButton-CtWgvvKY.js";import{_ as ht}from"./index-ChJhOcSY.js";import{_ as Oe,F as ze,u as ft}from"./useChatSetting-DXI5K0PP.js";import{R as Qe,B as he}from"./RightOutlined-B8T6erWu.js";import{M as fe}from"./useChatSource-Bckutulg.js";import{u as _e}from"./useQuickStart-BfaSdA65.js";import{u as ve}from"./useBots-15BkouYQ.js";import{u as qt}from"./useBotsChat-DFU-TgEz.js";import{r as Te}from"./router-DGGEY2vh.js";import{_ as Kt}from"./knowledge-zhu8jsrY.js";import{S as Gt}from"./index-LACstYeL.js";import{_ as Yt}from"./ChatSourceDialog.vue_vue_type_script_setup_true_lang-B5rlnGLT.js";import{S as pt,a as jt}from"./injectionKey-DGYNie3Z.js";import{i as Wt}from"./initDefaultProps-U-O0SP5N.js";import"./avatar-CwuB3r1Y.js";import"./index-wYqO6F8P.js";import"./responsiveObserve-DIReCmpf.js";import"./collapseMotion-CK37t8ee.js";import"./class-DeKWk5pD.js";import"./index-BHZunxl1.js";const Xt=l=>!isNaN(parseFloat(l))&&isFinite(l),Zt=l=>{const{componentCls:n,colorBgContainer:i,colorBgBody:h,colorText:c}=l;return{[`${n}-sider-light`]:{background:i,[`${n}-sider-trigger`]:{color:c,background:i},[`${n}-sider-zero-width-trigger`]:{color:c,background:i,border:`1px solid ${h}`,borderInlineStart:0}}}},Qt=l=>{const{antCls:n,componentCls:i,colorText:h,colorTextLightSolid:c,colorBgHeader:u,colorBgBody:b,colorBgTrigger:e,layoutHeaderHeight:o,layoutHeaderPaddingInline:t,layoutHeaderColor:a,layoutFooterPadding:s,layoutTriggerHeight:r,layoutZeroTriggerSize:f,motionDurationMid:v,motionDurationSlow:p,fontSize:y,borderRadius:w}=l;return{[i]:V(V({display:"flex",flex:"auto",flexDirection:"column",color:h,minHeight:0,background:b,"&, *":{boxSizing:"border-box"},[`&${i}-has-sider`]:{flexDirection:"row",[`> ${i}, > ${i}-content`]:{width:0}},[`${i}-header, &${i}-footer`]:{flex:"0 0 auto"},[`${i}-header`]:{height:o,paddingInline:t,color:a,lineHeight:`${o}px`,background:u,[`${n}-menu`]:{lineHeight:"inherit"}},[`${i}-footer`]:{padding:s,color:h,fontSize:y,background:b},[`${i}-content`]:{flex:"auto",minHeight:0},[`${i}-sider`]:{position:"relative",minWidth:0,background:u,transition:`all ${v}, background 0s`,"&-children":{height:"100%",marginTop:-.1,paddingTop:.1,[`${n}-menu${n}-menu-inline-collapsed`]:{width:"auto"}},"&-has-trigger":{paddingBottom:r},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:r,color:c,lineHeight:`${r}px`,textAlign:"center",background:e,cursor:"pointer",transition:`all ${v}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:o,insetInlineEnd:-f,zIndex:1,width:f,height:f,color:c,fontSize:l.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:u,borderStartStartRadius:0,borderStartEndRadius:w,borderEndEndRadius:w,borderEndStartRadius:0,cursor:"pointer",transition:`background ${p} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${p}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:-f,borderStartStartRadius:w,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:w}}}}},Zt(l)),{"&-rtl":{direction:"rtl"}})}},Jt=nt("Layout",l=>{const{colorText:n,controlHeightSM:i,controlHeight:h,controlHeightLG:c,marginXXS:u}=l,b=c*1.25,e=st(l,{layoutHeaderHeight:h*2,layoutHeaderPaddingInline:b,layoutHeaderColor:n,layoutFooterPadding:`${i}px ${b}px`,layoutTriggerHeight:c+u*2,layoutZeroTriggerSize:c});return[Qt(e)]},l=>{const{colorBgLayout:n}=l;return{colorBgHeader:"#001529",colorBgBody:n,colorBgTrigger:"#002140"}}),De=()=>({prefixCls:String,hasSider:{type:Boolean,default:void 0},tagName:String});function ke(l){let{suffixCls:n,tagName:i,name:h}=l;return c=>T({compatConfig:{MODE:3},name:h,props:De(),setup(b,e){let{slots:o}=e;const{prefixCls:t}=Ce(n,b);return()=>{const a=V(V({},b),{prefixCls:t.value,tagName:i});return g(c,a,o)}}})}const Ue=T({compatConfig:{MODE:3},props:De(),setup(l,n){let{slots:i}=n;return()=>g(l.tagName,{class:l.prefixCls},i)}}),eo=T({compatConfig:{MODE:3},inheritAttrs:!1,props:De(),setup(l,n){let{slots:i,attrs:h}=n;const{prefixCls:c,direction:u}=Ce("",l),[b,e]=Jt(c),o=N([]);at(pt,{addSider:s=>{o.value=[...o.value,s]},removeSider:s=>{o.value=o.value.filter(r=>r!==s)}});const a=re(()=>{const{prefixCls:s,hasSider:r}=l;return{[e.value]:!0,[`${s}`]:!0,[`${s}-has-sider`]:typeof r=="boolean"?r:o.value.length>0,[`${s}-rtl`]:u.value==="rtl"}});return()=>{const{tagName:s}=l;return b(g(s,V(V({},h),{class:[a.value,h.class]}),i))}}}),Se=ke({suffixCls:"layout",tagName:"section",name:"ALayout"})(eo),Ae=ke({suffixCls:"layout-header",tagName:"header",name:"ALayoutHeader"})(Ue),$e=ke({suffixCls:"layout-footer",tagName:"footer",name:"ALayoutFooter"})(Ue),we=ke({suffixCls:"layout-content",tagName:"main",name:"ALayoutContent"})(Ue);var to={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};function Je(l){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?Object(arguments[n]):{},h=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(h=h.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),h.forEach(function(c){oo(l,c,i[c])})}return l}function oo(l,n,i){return n in l?Object.defineProperty(l,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[n]=i,l}var He=function(n,i){var h=Je({},n,i.attrs);return g(lt,Je({},h,{icon:to}),null)};He.displayName="BarsOutlined";He.inheritAttrs=!1;const et={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px",xxxl:"1999.98px"},no=()=>({prefixCls:String,collapsible:{type:Boolean,default:void 0},collapsed:{type:Boolean,default:void 0},defaultCollapsed:{type:Boolean,default:void 0},reverseArrow:{type:Boolean,default:void 0},zeroWidthTriggerStyle:{type:Object,default:void 0},trigger:J.any,width:J.oneOfType([J.number,J.string]),collapsedWidth:J.oneOfType([J.number,J.string]),breakpoint:J.oneOf(We("xs","sm","md","lg","xl","xxl","xxxl")),theme:J.oneOf(We("light","dark")).def("dark"),onBreakpoint:Function,onCollapse:Function}),so=(()=>{let l=0;return function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return l+=1,`${n}${l}`}})(),ye=T({compatConfig:{MODE:3},name:"ALayoutSider",inheritAttrs:!1,props:Wt(no(),{collapsible:!1,defaultCollapsed:!1,reverseArrow:!1,width:200,collapsedWidth:80}),emits:["breakpoint","update:collapsed","collapse"],setup(l,n){let{emit:i,attrs:h,slots:c}=n;const{prefixCls:u}=Ce("layout-sider",l),b=Bt(pt,void 0),e=ae(!!(l.collapsed!==void 0?l.collapsed:l.defaultCollapsed)),o=ae(!1);ge(()=>l.collapsed,()=>{e.value=!!l.collapsed}),at(jt,e);const t=(p,y)=>{l.collapsed===void 0&&(e.value=p),i("update:collapsed",p),i("collapse",p,y)},a=ae(p=>{o.value=p.matches,i("breakpoint",p.matches),e.value!==p.matches&&t(p.matches,"responsive")});let s;function r(p){return a.value(p)}const f=so("ant-sider-");b&&b.addSider(f),Lt(()=>{ge(()=>l.breakpoint,()=>{try{s==null||s.removeEventListener("change",r)}catch{s==null||s.removeListener(r)}if(typeof window<"u"){const{matchMedia:p}=window;if(p&&l.breakpoint&&l.breakpoint in et){s=p(`(max-width: ${et[l.breakpoint]})`);try{s.addEventListener("change",r)}catch{s.addListener(r)}r(s)}}},{immediate:!0})}),Ne(()=>{try{s==null||s.removeEventListener("change",r)}catch{s==null||s.removeListener(r)}b&&b.removeSider(f)});const v=()=>{t(!e.value,"clickTrigger")};return()=>{var p,y;const w=u.value,{collapsedWidth:m,width:x,reverseArrow:C,zeroWidthTriggerStyle:k,trigger:I=(p=c.trigger)===null||p===void 0?void 0:p.call(c),collapsible:S,theme:Z}=l,z=e.value?m:x,W=Xt(z)?`${z}px`:String(z),oe=parseFloat(String(m||0))===0?g("span",{onClick:v,class:je(`${w}-zero-width-trigger`,`${w}-zero-width-trigger-${C?"right":"left"}`),style:k},[I||g(He,null,null)]):null,pe={expanded:C?g(Qe,null,null):g(Ze,null,null),collapsed:C?g(Ze,null,null):g(Qe,null,null)},R=e.value?"collapsed":"expanded",M=pe[R],U=I!==null?oe||g("div",{class:`${w}-trigger`,onClick:v,style:{width:W}},[I||M]):null,B=[h.style,{flex:`0 0 ${W}`,maxWidth:W,minWidth:W,width:W}],D=je(w,`${w}-${Z}`,{[`${w}-collapsed`]:!!e.value,[`${w}-has-trigger`]:S&&I!==null&&!oe,[`${w}-below`]:!!o.value,[`${w}-zero-width`]:parseFloat(W)===0},h.class);return g("aside",se(se({},h),{},{class:D,style:B}),[g("div",{class:`${w}-children`},[(y=c.default)===null||y===void 0?void 0:y.call(c)]),S||o.value&&oe?U:null])}}}),ao=ye,lo=we,io=V(Se,{Header:Ae,Footer:$e,Content:we,Sider:ye,install:l=>(l.component(Se.name,Se),l.component(Ae.name,Ae),l.component($e.name,$e),l.component(ye.name,ye),l.component(we.name,we),l)}),ro=l=>{const{componentCls:n}=l;return{[n]:V(V({},Nt(l)),{display:"flex",justifyContent:"center",alignItems:"center",padding:l.paddingSM,backgroundColor:l.colorWhite,borderRadius:l.borderRadiusLG,border:`${l.lineWidth}px ${l.lineType} ${l.colorSplit}`,position:"relative",width:"100%",height:"100%",overflow:"hidden",[`& > ${n}-mask`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:10,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",color:l.colorText,lineHeight:l.lineHeight,background:l.QRCodeMaskBackgroundColor,textAlign:"center",[`& > ${n}-expired , & > ${n}-scanned`]:{color:l.QRCodeTextColor}},"&-icon":{marginBlockEnd:l.marginXS,fontSize:l.controlHeight}}),[`${n}-borderless`]:{borderColor:"transparent"}}},co=nt("QRCode",l=>ro(st(l,{QRCodeTextColor:"rgba(0, 0, 0, 0.88)",QRCodeMaskBackgroundColor:"rgba(255, 255, 255, 0.96)"})));var uo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"};function tt(l){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?Object(arguments[n]):{},h=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(h=h.concat(Object.getOwnPropertySymbols(i).filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable}))),h.forEach(function(c){ho(l,c,i[c])})}return l}function ho(l,n,i){return n in l?Object.defineProperty(l,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[n]=i,l}var Ve=function(n,i){var h=tt({},n,i.attrs);return g(lt,tt({},h,{icon:uo}),null)};Ve.displayName="ReloadOutlined";Ve.inheritAttrs=!1;const qe=()=>({size:{type:Number,default:160},value:{type:String,required:!0},type:Ie("canvas"),color:String,bgColor:String,includeMargin:Boolean,imageSettings:Pt()}),fo=()=>V(V({},qe()),{errorLevel:Ie("M"),icon:String,iconSize:{type:Number,default:40},status:Ie("active"),bordered:{type:Boolean,default:!0}});/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var G;(function(l){class n{static encodeText(e,o){const t=l.QrSegment.makeSegments(e);return n.encodeSegments(t,o)}static encodeBinary(e,o){const t=l.QrSegment.makeBytes(e);return n.encodeSegments([t],o)}static encodeSegments(e,o){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:40,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1,r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;if(!(n.MIN_VERSION<=t&&t<=a&&a<=n.MAX_VERSION)||s<-1||s>7)throw new RangeError("Invalid value");let f,v;for(f=t;;f++){const m=n.getNumDataCodewords(f,o)*8,x=u.getTotalBits(e,f);if(x<=m){v=x;break}if(f>=a)throw new RangeError("Data too long")}for(const m of[n.Ecc.MEDIUM,n.Ecc.QUARTILE,n.Ecc.HIGH])r&&v<=n.getNumDataCodewords(f,m)*8&&(o=m);const p=[];for(const m of e){i(m.mode.modeBits,4,p),i(m.numChars,m.mode.numCharCountBits(f),p);for(const x of m.getData())p.push(x)}c(p.length==v);const y=n.getNumDataCodewords(f,o)*8;c(p.length<=y),i(0,Math.min(4,y-p.length),p),i(0,(8-p.length%8)%8,p),c(p.length%8==0);for(let m=236;p.length<y;m^=253)i(m,8,p);const w=[];for(;w.length*8<p.length;)w.push(0);return p.forEach((m,x)=>w[x>>>3]|=m<<7-(x&7)),new n(f,o,w,s)}constructor(e,o,t,a){if(this.version=e,this.errorCorrectionLevel=o,this.modules=[],this.isFunction=[],e<n.MIN_VERSION||e>n.MAX_VERSION)throw new RangeError("Version value out of range");if(a<-1||a>7)throw new RangeError("Mask value out of range");this.size=e*4+17;const s=[];for(let f=0;f<this.size;f++)s.push(!1);for(let f=0;f<this.size;f++)this.modules.push(s.slice()),this.isFunction.push(s.slice());this.drawFunctionPatterns();const r=this.addEccAndInterleave(t);if(this.drawCodewords(r),a==-1){let f=1e9;for(let v=0;v<8;v++){this.applyMask(v),this.drawFormatBits(v);const p=this.getPenaltyScore();p<f&&(a=v,f=p),this.applyMask(v)}}c(0<=a&&a<=7),this.mask=a,this.applyMask(a),this.drawFormatBits(a),this.isFunction=[]}getModule(e,o){return 0<=e&&e<this.size&&0<=o&&o<this.size&&this.modules[o][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let t=0;t<this.size;t++)this.setFunctionModule(6,t,t%2==0),this.setFunctionModule(t,6,t%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),o=e.length;for(let t=0;t<o;t++)for(let a=0;a<o;a++)t==0&&a==0||t==0&&a==o-1||t==o-1&&a==0||this.drawAlignmentPattern(e[t],e[a]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const o=this.errorCorrectionLevel.formatBits<<3|e;let t=o;for(let s=0;s<10;s++)t=t<<1^(t>>>9)*1335;const a=(o<<10|t)^21522;c(a>>>15==0);for(let s=0;s<=5;s++)this.setFunctionModule(8,s,h(a,s));this.setFunctionModule(8,7,h(a,6)),this.setFunctionModule(8,8,h(a,7)),this.setFunctionModule(7,8,h(a,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,h(a,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,h(a,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,h(a,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^(e>>>11)*7973;const o=this.version<<12|e;c(o>>>18==0);for(let t=0;t<18;t++){const a=h(o,t),s=this.size-11+t%3,r=Math.floor(t/3);this.setFunctionModule(s,r,a),this.setFunctionModule(r,s,a)}}drawFinderPattern(e,o){for(let t=-4;t<=4;t++)for(let a=-4;a<=4;a++){const s=Math.max(Math.abs(a),Math.abs(t)),r=e+a,f=o+t;0<=r&&r<this.size&&0<=f&&f<this.size&&this.setFunctionModule(r,f,s!=2&&s!=4)}}drawAlignmentPattern(e,o){for(let t=-2;t<=2;t++)for(let a=-2;a<=2;a++)this.setFunctionModule(e+a,o+t,Math.max(Math.abs(a),Math.abs(t))!=1)}setFunctionModule(e,o,t){this.modules[o][e]=t,this.isFunction[o][e]=!0}addEccAndInterleave(e){const o=this.version,t=this.errorCorrectionLevel;if(e.length!=n.getNumDataCodewords(o,t))throw new RangeError("Invalid argument");const a=n.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][o],s=n.ECC_CODEWORDS_PER_BLOCK[t.ordinal][o],r=Math.floor(n.getNumRawDataModules(o)/8),f=a-r%a,v=Math.floor(r/a),p=[],y=n.reedSolomonComputeDivisor(s);for(let m=0,x=0;m<a;m++){const C=e.slice(x,x+v-s+(m<f?0:1));x+=C.length;const k=n.reedSolomonComputeRemainder(C,y);m<f&&C.push(0),p.push(C.concat(k))}const w=[];for(let m=0;m<p[0].length;m++)p.forEach((x,C)=>{(m!=v-s||C>=f)&&w.push(x[m])});return c(w.length==r),w}drawCodewords(e){if(e.length!=Math.floor(n.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let o=0;for(let t=this.size-1;t>=1;t-=2){t==6&&(t=5);for(let a=0;a<this.size;a++)for(let s=0;s<2;s++){const r=t-s,v=(t+1&2)==0?this.size-1-a:a;!this.isFunction[v][r]&&o<e.length*8&&(this.modules[v][r]=h(e[o>>>3],7-(o&7)),o++)}}c(o==e.length*8)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let o=0;o<this.size;o++)for(let t=0;t<this.size;t++){let a;switch(e){case 0:a=(t+o)%2==0;break;case 1:a=o%2==0;break;case 2:a=t%3==0;break;case 3:a=(t+o)%3==0;break;case 4:a=(Math.floor(t/3)+Math.floor(o/2))%2==0;break;case 5:a=t*o%2+t*o%3==0;break;case 6:a=(t*o%2+t*o%3)%2==0;break;case 7:a=((t+o)%2+t*o%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[o][t]&&a&&(this.modules[o][t]=!this.modules[o][t])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let r=!1,f=0;const v=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[s][p]==r?(f++,f==5?e+=n.PENALTY_N1:f>5&&e++):(this.finderPenaltyAddHistory(f,v),r||(e+=this.finderPenaltyCountPatterns(v)*n.PENALTY_N3),r=this.modules[s][p],f=1);e+=this.finderPenaltyTerminateAndCount(r,f,v)*n.PENALTY_N3}for(let s=0;s<this.size;s++){let r=!1,f=0;const v=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[p][s]==r?(f++,f==5?e+=n.PENALTY_N1:f>5&&e++):(this.finderPenaltyAddHistory(f,v),r||(e+=this.finderPenaltyCountPatterns(v)*n.PENALTY_N3),r=this.modules[p][s],f=1);e+=this.finderPenaltyTerminateAndCount(r,f,v)*n.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let r=0;r<this.size-1;r++){const f=this.modules[s][r];f==this.modules[s][r+1]&&f==this.modules[s+1][r]&&f==this.modules[s+1][r+1]&&(e+=n.PENALTY_N2)}let o=0;for(const s of this.modules)o=s.reduce((r,f)=>r+(f?1:0),o);const t=this.size*this.size,a=Math.ceil(Math.abs(o*20-t*10)/t)-1;return c(0<=a&&a<=9),e+=a*n.PENALTY_N4,c(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(this.version==1)return[];{const e=Math.floor(this.version/7)+2,o=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2,t=[6];for(let a=this.size-7;t.length<e;a-=o)t.splice(1,0,a);return t}}static getNumRawDataModules(e){if(e<n.MIN_VERSION||e>n.MAX_VERSION)throw new RangeError("Version number out of range");let o=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;o-=(25*t-10)*t-55,e>=7&&(o-=36)}return c(208<=o&&o<=29648),o}static getNumDataCodewords(e,o){return Math.floor(n.getNumRawDataModules(e)/8)-n.ECC_CODEWORDS_PER_BLOCK[o.ordinal][e]*n.NUM_ERROR_CORRECTION_BLOCKS[o.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");const o=[];for(let a=0;a<e-1;a++)o.push(0);o.push(1);let t=1;for(let a=0;a<e;a++){for(let s=0;s<o.length;s++)o[s]=n.reedSolomonMultiply(o[s],t),s+1<o.length&&(o[s]^=o[s+1]);t=n.reedSolomonMultiply(t,2)}return o}static reedSolomonComputeRemainder(e,o){const t=o.map(a=>0);for(const a of e){const s=a^t.shift();t.push(0),o.forEach((r,f)=>t[f]^=n.reedSolomonMultiply(r,s))}return t}static reedSolomonMultiply(e,o){if(e>>>8||o>>>8)throw new RangeError("Byte out of range");let t=0;for(let a=7;a>=0;a--)t=t<<1^(t>>>7)*285,t^=(o>>>a&1)*e;return c(t>>>8==0),t}finderPenaltyCountPatterns(e){const o=e[1];c(o<=this.size*3);const t=o>0&&e[2]==o&&e[3]==o*3&&e[4]==o&&e[5]==o;return(t&&e[0]>=o*4&&e[6]>=o?1:0)+(t&&e[6]>=o*4&&e[0]>=o?1:0)}finderPenaltyTerminateAndCount(e,o,t){return e&&(this.finderPenaltyAddHistory(o,t),o=0),o+=this.size,this.finderPenaltyAddHistory(o,t),this.finderPenaltyCountPatterns(t)}finderPenaltyAddHistory(e,o){o[0]==0&&(e+=this.size),o.pop(),o.unshift(e)}}n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],l.QrCode=n;function i(b,e,o){if(e<0||e>31||b>>>e)throw new RangeError("Value out of range");for(let t=e-1;t>=0;t--)o.push(b>>>t&1)}function h(b,e){return(b>>>e&1)!=0}function c(b){if(!b)throw new Error("Assertion error")}class u{static makeBytes(e){const o=[];for(const t of e)i(t,8,o);return new u(u.Mode.BYTE,e.length,o)}static makeNumeric(e){if(!u.isNumeric(e))throw new RangeError("String contains non-numeric characters");const o=[];for(let t=0;t<e.length;){const a=Math.min(e.length-t,3);i(parseInt(e.substring(t,t+a),10),a*3+1,o),t+=a}return new u(u.Mode.NUMERIC,e.length,o)}static makeAlphanumeric(e){if(!u.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");const o=[];let t;for(t=0;t+2<=e.length;t+=2){let a=u.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t))*45;a+=u.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t+1)),i(a,11,o)}return t<e.length&&i(u.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t)),6,o),new u(u.Mode.ALPHANUMERIC,e.length,o)}static makeSegments(e){return e==""?[]:u.isNumeric(e)?[u.makeNumeric(e)]:u.isAlphanumeric(e)?[u.makeAlphanumeric(e)]:[u.makeBytes(u.toUtf8ByteArray(e))]}static makeEci(e){const o=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)i(e,8,o);else if(e<16384)i(2,2,o),i(e,14,o);else if(e<1e6)i(6,3,o),i(e,21,o);else throw new RangeError("ECI assignment value out of range");return new u(u.Mode.ECI,0,o)}static isNumeric(e){return u.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return u.ALPHANUMERIC_REGEX.test(e)}constructor(e,o,t){if(this.mode=e,this.numChars=o,this.bitData=t,o<0)throw new RangeError("Invalid argument");this.bitData=t.slice()}getData(){return this.bitData.slice()}static getTotalBits(e,o){let t=0;for(const a of e){const s=a.mode.numCharCountBits(o);if(a.numChars>=1<<s)return 1/0;t+=4+s+a.bitData.length}return t}static toUtf8ByteArray(e){e=encodeURI(e);const o=[];for(let t=0;t<e.length;t++)e.charAt(t)!="%"?o.push(e.charCodeAt(t)):(o.push(parseInt(e.substring(t+1,t+3),16)),t+=2);return o}}u.NUMERIC_REGEX=/^[0-9]*$/,u.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,u.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",l.QrSegment=u})(G||(G={}));(function(l){(function(n){class i{constructor(c,u){this.ordinal=c,this.formatBits=u}}i.LOW=new i(0,1),i.MEDIUM=new i(1,0),i.QUARTILE=new i(2,3),i.HIGH=new i(3,2),n.Ecc=i})(l.QrCode||(l.QrCode={}))})(G||(G={}));(function(l){(function(n){class i{constructor(c,u){this.modeBits=c,this.numBitsCharCount=u}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}}i.NUMERIC=new i(1,[10,12,14]),i.ALPHANUMERIC=new i(2,[9,11,13]),i.BYTE=new i(4,[8,16,16]),i.KANJI=new i(8,[8,10,12]),i.ECI=new i(7,[0,0,0]),n.Mode=i})(l.QrSegment||(l.QrSegment={}))})(G||(G={}));const mt={L:G.QrCode.Ecc.LOW,M:G.QrCode.Ecc.MEDIUM,Q:G.QrCode.Ecc.QUARTILE,H:G.QrCode.Ecc.HIGH},Be=128,gt="L",_t="#FFFFFF",vt="#000000",bt=!1,po=4,mo=0,go=.1;function wt(l){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=[];return l.forEach(function(h,c){let u=null;h.forEach(function(b,e){if(!b&&u!==null){i.push(`M${u+n} ${c+n}h${e-u}v1H${u+n}z`),u=null;return}if(e===h.length-1){if(!b)return;u===null?i.push(`M${e+n},${c+n} h1v1H${e+n}z`):i.push(`M${u+n},${c+n} h${e+1-u}v1H${u+n}z`);return}b&&u===null&&(u=e)})}),i.join("")}function yt(l,n){return l.slice().map((i,h)=>h<n.y||h>=n.y+n.h?i:i.map((c,u)=>u<n.x||u>=n.x+n.w?c:!1))}function Ct(l,n,i,h){if(h==null)return null;const c=l.length+i*2,u=Math.floor(n*go),b=c/n,e=(h.width||u)*b,o=(h.height||u)*b,t=h.x==null?l.length/2-e/2:h.x*b,a=h.y==null?l.length/2-o/2:h.y*b;let s=null;if(h.excavate){const r=Math.floor(t),f=Math.floor(a),v=Math.ceil(e+t-r),p=Math.ceil(o+a-f);s={x:r,y:f,w:v,h:p}}return{x:t,y:a,h:o,w:e,excavation:s}}function kt(l,n){return n!=null?Math.floor(n):l?po:mo}const _o=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),vo=T({name:"QRCodeCanvas",inheritAttrs:!1,props:V(V({},qe()),{level:String,bgColor:String,fgColor:String,marginSize:Number}),setup(l,n){let{attrs:i,expose:h}=n;const c=re(()=>{var o;return(o=l.imageSettings)===null||o===void 0?void 0:o.src}),u=ae(null),b=ae(null),e=ae(!1);return h({toDataURL:(o,t)=>{var a;return(a=u.value)===null||a===void 0?void 0:a.toDataURL(o,t)}}),it(()=>{const{value:o,size:t=Be,level:a=gt,bgColor:s=_t,fgColor:r=vt,includeMargin:f=bt,marginSize:v,imageSettings:p}=l;if(u.value!=null){const y=u.value,w=y.getContext("2d");if(!w)return;let m=G.QrCode.encodeText(o,mt[a]).getModules();const x=kt(f,v),C=m.length+x*2,k=Ct(m,t,x,p),I=b.value,S=e.value&&k!=null&&I!==null&&I.complete&&I.naturalHeight!==0&&I.naturalWidth!==0;S&&k.excavation!=null&&(m=yt(m,k.excavation));const Z=window.devicePixelRatio||1;y.height=y.width=t*Z;const z=t/C*Z;w.scale(z,z),w.fillStyle=s,w.fillRect(0,0,C,C),w.fillStyle=r,_o?w.fill(new Path2D(wt(m,x))):m.forEach(function(W,oe){W.forEach(function(pe,R){pe&&w.fillRect(R+x,oe+x,1,1)})}),S&&w.drawImage(I,k.x+x,k.y+x,k.w,k.h)}},{flush:"post"}),ge(c,()=>{e.value=!1}),()=>{var o;const t=(o=l.size)!==null&&o!==void 0?o:Be,a={height:`${t}px`,width:`${t}px`};let s=null;return c.value!=null&&(s=g("img",{src:c.value,key:c.value,style:{display:"none"},onLoad:()=>{e.value=!0},ref:b},null)),g(te,null,[g("canvas",se(se({},i),{},{style:[a,i.style],ref:u}),null),s])}}}),bo=T({name:"QRCodeSVG",inheritAttrs:!1,props:V(V({},qe()),{color:String,level:String,bgColor:String,fgColor:String,marginSize:Number,title:String}),setup(l){let n=null,i=null,h=null,c=null,u=null,b=null;return it(()=>{const{value:e,size:o=Be,level:t=gt,includeMargin:a=bt,marginSize:s,imageSettings:r}=l;n=G.QrCode.encodeText(e,mt[t]).getModules(),i=kt(a,s),h=n.length+i*2,c=Ct(n,o,i,r),r!=null&&c!=null&&(c.excavation!=null&&(n=yt(n,c.excavation)),b=g("image",{"xlink:href":r.src,height:c.h,width:c.w,x:c.x+i,y:c.y+i,preserveAspectRatio:"none"},null)),u=wt(n,i)}),()=>{const e=l.bgColor&&_t,o=l.fgColor&&vt;return g("svg",{height:l.size,width:l.size,viewBox:`0 0 ${h} ${h}`},[!!l.title&&g("title",null,[l.title]),g("path",{fill:e,d:`M0,0 h${h}v${h}H0z`,"shape-rendering":"crispEdges"},null),g("path",{fill:o,d:u,"shape-rendering":"crispEdges"},null),b])}}}),wo=T({name:"AQrcode",inheritAttrs:!1,props:fo(),emits:["refresh"],setup(l,n){let{emit:i,attrs:h,expose:c}=n;const[u]=Ot("QRCode"),{prefixCls:b}=Ce("qrcode",l),[e,o]=co(b),[,t]=zt(),a=N();c({toDataURL:(r,f)=>{var v;return(v=a.value)===null||v===void 0?void 0:v.toDataURL(r,f)}});const s=re(()=>{const{value:r,icon:f="",size:v=160,iconSize:p=40,color:y=t.value.colorText,bgColor:w="transparent",errorLevel:m="M"}=l,x={src:f,x:void 0,y:void 0,height:p,width:p,excavate:!0};return{value:r,size:v-(t.value.paddingSM+t.value.lineWidth)*2,level:m,bgColor:w,fgColor:y,imageSettings:f?x:void 0}});return()=>{const r=b.value;return e(g("div",se(se({},h),{},{style:[h.style,{width:`${l.size}px`,height:`${l.size}px`,backgroundColor:s.value.bgColor}],class:[o.value,r,{[`${r}-borderless`]:!l.bordered}]}),[l.status!=="active"&&g("div",{class:`${r}-mask`},[l.status==="loading"&&g(Gt,null,null),l.status==="expired"&&g(te,null,[g("p",{class:`${r}-expired`},[u.value.expired]),g(he,{type:"link",onClick:f=>i("refresh",f)},{default:()=>[u.value.refresh],icon:()=>g(Ve,null,null)})]),l.status==="scanned"&&g("p",{class:`${r}-scanned`},[u.value.scanned])]),l.type==="canvas"?g(vo,se({ref:a},s.value),null):g(bo,s.value,null)]))}}}),yo=Ft(wo),Co=T({__name:"AddInput",setup(l){const{getList:n,setCurrentId:i,setNewKbId:h,setCurrentKbName:c,setDefault:u}=X(),{selectList:b}=F(X()),{setModalVisible:e}=me(),{modalVisible:o}=F(me()),t=N(""),a=H().common,s=async()=>{if(!t.value.length){P.error(a.errorKnowledge);return}try{const r=await Q(await q.createKb({kb_name:t.value}));t.value="",i(r==null?void 0:r.kb_id),h(r==null?void 0:r.kb_id),c(r==null?void 0:r.kb_name),b.value.push(r==null?void 0:r.kb_id),await n(),e(!o.value),u(Le.optionlist)}catch(r){console.log(r),P.error(r.msg||a.error)}};return(r,f)=>{const v=de;return $(),Y(v,{value:d(t),"onUpdate:value":f[0]||(f[0]=p=>ee(t)?t.value=p:null),class:"add-input",placeholder:d(a).newPlaceholder},{suffix:A(()=>[_("div",{class:"add-button",onClick:s},E(d(a).new),1)]),_:1},8,["value","placeholder"])}}}),ko=j(Co,[["__scopeId","data-v-dbcbb306"]]),xo=["onClick"],So={class:"tools-box"},Ao=["onClick"],$o={class:"tool-name"},Eo=["onClick"],Io={class:"tool-name"},Mo=["onClick"],Ro={class:"tool-name"},Bo={class:"content"},Lo={class:"title"},No={class:"normal"},Po={class:"title-text"},Fo={class:"editing"},Oo={class:"title-text"},zo={class:"icon-box"},To=T({__name:"SiderCard",props:{list:{type:Array,require:!0,default:()=>[]},style:{type:Object,default:()=>({width:"232px"})}},setup(l){const n=H().common,{setShowDeleteModal:i,setCurrentId:h,setCurrentKbName:c,setDefault:u}=X(),{showDeleteModal:b,selectList:e,currentId:o}=F(X()),t=l,a=N(""),s=m=>{if(m.edit)return;const x=m.kb_id;if(console.log("点击知识库"),e.value.includes(x)){const C=e.value.findIndex(k=>k===x);C!=-1&&e.value.splice(C,1)}else e.value.push(x)},r=m=>{h(m.kb_id),c(m.kb_name),u(Le.optionlist)},f=m=>{i(!b.value),h(m.kb_id),console.log(`删除${m.kb_id}`)},v=m=>{console.log(`编辑${m.kb_id}`),h(m.kb_id),a.value=m.kb_name,m.edit=!m.edit},p=async m=>{try{await Q(await q.kbConfig({kb_id:m.kb_id,new_kb_name:m.kb_name})),a.value="",m.edit=!m.edit,P.success(n.renameSucceeded)}catch(x){P.error(x.msg||n.renameFailed)}},y=m=>{console.log("取消修改",m),m.kb_name=a.value,a.value="",m.edit=!m.edit},w=re(()=>t.list.map(m=>{if(!m.kb_id.includes("_QUICK"))return m}));return(m,x)=>{const C=ce,k=de,I=ht;return $(!0),L(te,null,le(d(w),(S,Z)=>($(),L("div",{key:Z,class:ie([{active:d(e).includes(S.kb_id),"card-option-active":d(o)===S.kb_id},"card"]),style:rt(t.style),onClick:z=>s(S)},[g(I,{"overlay-class-name":"card-hover",placement:"right"},{content:A(()=>[_("div",So,[_("ul",null,[_("li",{onClick:z=>r(S)},[g(C,{class:"edit",name:"icon-manage"}),_("span",$o,E(d(n).manage),1)],8,Ao),_("li",{onClick:z=>v(S)},[g(C,{class:"edit",name:"edit"}),_("span",Io,E(d(n).rename),1)],8,Eo),_("li",{onClick:z=>f(S)},[g(C,{class:"delete",name:"delete"}),_("span",Ro,E(d(n).delete),1)],8,Mo)])])]),default:A(()=>[_("div",Bo,[_("div",Lo,[Me(_("div",No,[_("p",Po,E(S.kb_name),1)],512),[[Re,!S.edit]]),Me(_("div",Fo,[_("p",Oo,[g(k,{value:S.kb_name,"onUpdate:value":z=>S.kb_name=z,type:"text"},null,8,["value","onUpdate:value"])]),_("span",zo,[g(C,{class:"edit",name:"card-confirm",onClick:Xe(z=>p(S),["stop"])},null,8,["onClick"]),g(C,{class:"delete",name:"card-cancel",onClick:Xe(z=>y(S),["stop"])},null,8,["onClick"])])],512),[[Re,S.edit]])])])]),_:2},1024)],14,xo))),128)}}}),Do=j(To,[["__scopeId","data-v-0d63670f"]]),Uo={class:"mt-50px"},Ho={class:"basic-box"},Vo={key:0,class:"mt3"},qo={key:1,class:"mt3"},Ko={key:0,class:"loading-line-box"},Go=T({__name:"UploadInput",props:{kbId:{type:String,required:!0}},setup(l){const{urlList:n}=F(me()),i=H().common,h={span:10},c={span:10},u=N(null),b=N([]),e=N(""),o=N("normal");console.log(l.kbId);const a=()=>{if(!e.value){o.value="error";return}const v={status:"default",text:e.value,percent:0};n.value.push(v),e.value=""},s=(v,p)=>{console.log(n.value),n.value[v].status=p},r=()=>{e.value&&(o.value="normal")},f=v=>{n.value.splice(v,1)};return Ne(()=>{b.value.forEach(v=>{clearInterval(v)})}),(v,p)=>{const y=ce,w=de,m=Oe,x=ze;return $(),L("div",Uo,[_("div",Ho,[g(w,{value:d(e),"onUpdate:value":p[0]||(p[0]=C=>ee(e)?e.value=C:null),status:d(o),placeholder:d(i).urlPlaceholder,onChange:p[1]||(p[1]=C=>r())},{suffix:A(()=>[g(y,{name:"add",class:"mt3",onClick:a})]),_:1},8,["value","status","placeholder"]),Me(_("span",{class:"red-text"},E(d(i).errTip),513),[[Re,d(o)==="error"]])]),g(x,{"label-col":h,"wrapper-col":c},{default:A(()=>[($(!0),L(te,null,le(d(n),(C,k)=>($(),Y(m,{key:k,class:"relative",onMouseenter:I=>s(k,"hover"),onMouseleave:I=>s(k,"default")},{default:A(()=>[g(w,{value:C.text,"onUpdate:value":I=>C.text=I,placeholder:d(i).urlPlaceholder},{suffix:A(()=>[C.status==="hover"?($(),L("span",Vo,[g(y,{name:"card-delete",onClick:I=>f(k)},null,8,["onClick"])])):($(),L("span",qo))]),_:2},1032,["value","onUpdate:value","placeholder"]),C.status==="parsing"?($(),L("span",Ko,[_("span",{ref_for:!0,ref_key:"percentRef",ref:u,class:"loading-line",style:rt({width:C.percent+"%"})},null,4)])):ct("",!0)]),_:2},1032,["onMouseenter","onMouseleave"]))),128))]),_:1})])}}}),Yo=j(Go,[["__scopeId","data-v-2840253f"]]),jo={class:"line-url"},Wo=T({__name:"UrlUploadDialog",setup(l){const n=H().common,{setKnowledgeName:i}=me(),{urlModalVisible:h,modalTitle:c,urlList:u}=F(me()),{currentId:b,currentKbName:e}=F(X()),{getDetails:o}=Ee(),{chatSettingFormActive:t}=F(ft()),a=N(!1),s=N(),r=N([]),f=re(()=>u.value.length&&u.value.every(y=>y.text.length));ge(()=>h.value,()=>{i(e.value),h.value||(r.value=[])});const v=async()=>{a.value=!0;let y=await Promise.all(u.value.map(p));console.log(y),a.value=!1,h.value=!1,o()},p=async y=>{let w=await q.uploadUrl({chunk_size:t.value.chunkSize,kb_id:b.value,url:y.text,mode:"strong"});return w==null?void 0:w.data};return Ne(()=>{s.value&&clearTimeout(s.value)}),(y,w)=>{const m=he,x=fe;return $(),Y(ue,{to:"body"},[g(x,{open:d(h),"onUpdate:open":w[0]||(w[0]=C=>ee(h)?h.value=C:null),title:d(c),centered:"",width:"480px","wrap-class-name":"upload-file-modal",onOk:v},{footer:A(()=>[g(m,{key:"submit",type:"primary",class:"upload-btn",disabled:!d(f),loading:d(a),onClick:v},{default:A(()=>[K(E(d(n).confirm),1)]),_:1},8,["disabled","loading"])]),default:A(()=>[_("div",jo,[g(Yo,{"kb-id":d(b)},null,8,["kb-id"])])]),_:1},8,["open","title"])])}}}),Xo=j(Wo,[["__scopeId","data-v-88c2d16b"]]),Zo={class:"private"},Qo={class:"private-title"},Jo=T({__name:"DeleteModal",setup(l){const n=H().common,{showDeleteModal:i,currentId:h,selectList:c}=F(X()),{setShowDeleteModal:u,getList:b}=X(),{clearChatList:e}=_e(),{deleteChatId:o}=F(_e()),t=N(!1),a=async()=>{t.value=!0;try{if((await Promise.race([await q.deleteKB({kb_ids:[h.value]}),await q.deleteKB({kb_ids:[h.value+"_FAQ"]})])).code===200){const r=c.value.findIndex(f=>f===h.value);r!=-1&&c.value.splice(r,1),u(!1),t.value=!1,P.success("删除成功"),e(o.value),o.value=null,await b()}else t.value=!1,P.error("删除失败")}catch(s){console.log(s),t.value=!1,P.error(s.msg||"删除失败")}};return(s,r)=>{const f=ce,v=fe;return $(),Y(ue,{to:"body"},[_("div",Zo,[g(v,{open:d(i),"onUpdate:open":r[0]||(r[0]=p=>ee(i)?i.value=p:null),"confirm-loading":d(t),centered:"",width:"480px","wrap-class-name":"private-modal","ok-text":d(n).confirm,"cancel-text":d(n).cancel,onOk:a},{title:A(()=>[_("div",Qo,[g(f,{class:"info",name:"info"}),K(" "+E(d(n).deleteDec),1)])]),_:1},8,["open","confirm-loading","ok-text","cancel-text"])])])}}}),en=j(Jo,[["__scopeId","data-v-465accc6"]]),tn={},on={class:""};function nn(l,n){return $(),L("div",on,[Tt(l.$slots,"default",{},void 0,!0)])}const sn=j(tn,[["render",nn],["__scopeId","data-v-629ddaa7"]]),an=l=>(Pe("data-v-20574e15"),l=l(),Fe(),l),ln={class:"edit-qa-set-comp"},rn={class:"tabs"},cn=["onClick"],un={class:"footer"},dn={key:1,class:"upload-excel"},hn={class:"demo-download"},fn={href:"https://download.ydstatic.com/ead/QAnything_QA_模板.xlsx",download:"QAnything_QA_模板.xlsx"},pn={class:"box"},mn={key:0,class:"before-upload-box"},gn=["accept"],_n={class:"before-upload"},vn={class:"upload-text-box"},bn={key:0},wn={class:"upload-text"},yn={class:"blue"},Cn={key:1},kn={class:"upload-text"},xn={class:"blue"},Sn={class:"list"},An={class:"name"},$n={class:"status-box"},En={key:1,class:"loading",src:It,alt:"loading"},In={class:"status"},Mn={class:"overly"},Rn=["accept"],Bn={class:"overly-content"},Ln=an(()=>_("span",null,"重新上传",-1)),Nn=["src"],Pn=T({__name:"EditQaSetDialog",setup(l){const{setEditModalVisible:n,setEditQaSet:i,getFaqList:h}=Ee(),{editModalVisible:c,editQaSet:u,faqType:b}=F(Ee()),{currentId:e}=F(X()),{chatSettingFormActive:o}=F(ft()),t=H().home,a=H().common,{language:s}=F(Rt()),r=N(!1),f=ut({question:"",answer:"",imgs:[]}),v=N(0),p=N(!1),y=N(""),w=N(""),m=[{name:t.enterQa,value:0},{name:t.batchUpload,value:1}],x=N(!1),C=N([]);ge(()=>c.value,()=>{var R,M,U;c.value?(v.value=0,u.value&&(f.question=(R=u.value)==null?void 0:R.question,f.answer=(M=u.value)==null?void 0:M.answer,f.imgs=(U=u.value)==null?void 0:U.picUrlList)):(i(null),k(),x.value=!1,C.value=[])},{immediate:!0});function k(){f.question="",f.answer="",f.imgs=[]}const I=async()=>{var R;try{await Q(await q.deleteFile({kb_id:`${e.value}_FAQ`,file_ids:[(R=u.value)==null?void 0:R.faqId]}))}catch(M){P.error(M.msg||"删除失败")}},S=async R=>{console.log("Success:",R),r.value=!0,b.value==="edit"&&await I();try{const M=[{question:R.question,answer:R.answer,nos_key:null}],U=await Q(await q.uploadFaqs({kb_id:`${e.value}_FAQ`,faqs:M,chunk_size:o.value.chunkSize.toString()}));console.log(U),P.success("上传成功")}catch(M){P.error(M.msg||"获取Bot信息失败")}h(),r.value=!1,n(!1)},Z=R=>{v.value=R},z=async(R,M)=>(console.log("file",R),new Promise((U,B)=>{R.name.split(".").pop().toLowerCase()==="xlsx"?(C.value.push({file_name:R.name,file:R,status:"loading",errorText:a.uploading,file_id:"",order:C.value.length}),U(M)):B(R.name)})),W=R=>{C.value=[];const M=R.target.files;Array.from(M).forEach(async(U,B)=>{try{await z(U,B)}catch(D){P.error(`${D}的文件格式不符`)}}),setTimeout(()=>{C.value.length&&oe()})},oe=async()=>{var U;const R=[];x.value=!0,console.log("uploadFileList",C.value),C.value.forEach(B=>{B.status==="loading"&&R.push(B)});const M=new FormData;for(let B=0;B<R.length;B++)M.append("files",(U=R[B])==null?void 0:U.file);M.append("user_id",$t),M.append("kb_id",`${e.value}_FAQ`),fetch(Et+"/local_doc_qa/upload_faqs",{method:"POST",body:M}).then(B=>{if(console.log(B),B.ok)return B.json();throw new Error("上传失败")}).then(B=>{console.log(B),B.code===200?(R.forEach((D,be)=>{let ne=B.data[be].status;ne=="green"||ne=="gray"?ne="success":ne="error",C.value[D.order].status=ne,C.value[D.order].errorText=a.upSucceeded}),n(!1),P.success("上传成功")):(P.error(B.msg||"出错了"),R.forEach(D=>{C.value[D.order].status="error",C.value[D.order].errorText=(B==null?void 0:B.msg)||a.upFailed}))}).catch(B=>{console.log(B),R.forEach(D=>{C.value[D.order].status=Mt.error,C.value[D.order].errorText=(D==null?void 0:D.msg)||a.upFailed}),P.error(JSON.stringify(B.message)||"出错了")}),h()},pe=()=>{p.value=!1,w.value=""};return(R,M)=>{const U=de,B=Oe,D=dt,be=he,ne=ze,xe=ce,St=sn,Ke=fe;return $(),Y(ue,{to:"body"},[g(Ke,{open:d(c),"onUpdate:open":M[5]||(M[5]=O=>ee(c)?c.value=O:null),title:d(t).inputQa,centered:"",destroyOnClose:!0,width:"480px","wrap-class-name":"edit-qa-set-modal",footer:null},{default:A(()=>[_("div",ln,[_("div",rn,[($(),L(te,null,le(m,O=>_("div",{class:ie(["tab-item",d(v)===O.value?"tab-item-active":""]),key:O.name,onClick:Ge=>Z(O.value)},E(O.name),11,cn)),64))]),d(v)===0?($(),Y(ne,{key:0,model:d(f),name:"edit_qa_set",class:"edit-qa-set-form",onFinish:S},{default:A(()=>[g(B,{name:"question",rules:[{required:!0,message:d(t).plsInputQ}]},{default:A(()=>[g(U,{value:d(f).question,"onUpdate:value":M[0]||(M[0]=O=>d(f).question=O),placeholder:d(t).setQPlaceholder,"show-count":"",maxlength:100,"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["rules"]),g(B,{name:"answer",rules:[{required:!0,message:d(t).plsInputA}]},{default:A(()=>[g(D,{value:d(f).answer,"onUpdate:value":M[1]||(M[1]=O=>d(f).answer=O),placeholder:d(t).setAPlaceholder,"show-count":"",maxlength:1e3,"auto-size":{minRows:5,maxRows:5}},null,8,["value","placeholder"])]),_:1},8,["rules"]),g(B,null,{default:A(()=>[_("div",un,[g(be,{class:"cancel-btn",onClick:M[2]||(M[2]=O=>d(n)(!1))},{default:A(()=>[K(E(d(a).cancel),1)]),_:1}),g(be,{loading:d(r),type:"primary","html-type":"submit",class:"login-form-btn"},{default:A(()=>[K(E(d(a).confirm2),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])):($(),L("div",dn,[_("div",hn,[_("a",fn,E(d(t).downTemp),1),_("span",null,E(d(t).uploadXlsxDesc),1)]),_("div",pn,[d(x)?($(),L("div",{key:1,class:ie(["upload-box","upload-list",`upload-${d(C)[0].status}`])},[g(St,null,{default:A(()=>[_("ul",Sn,[($(!0),L(te,null,le(d(C),(O,Ge)=>($(),L("li",{key:Ge},[_("span",An,E(O.file_name),1),_("div",$n,[O.status!="loading"?($(),Y(xe,{key:0,name:O.status},null,8,["name"])):($(),L("img",En)),_("span",In,E(O.errorText),1)])]))),128))])]),_:1}),_("div",Mn,[_("input",{class:"hide input",type:"file",accept:".xlsx",onChange:W,onClick:M[4]||(M[4]=O=>O.target.value="")},null,40,Rn),_("div",Bn,[g(xe,{name:"upload-white"}),Ln])])],2)):($(),L("div",mn,[_("input",{class:"hide input",type:"file",accept:".xlsx",onChange:W,onClick:M[3]||(M[3]=O=>O.target.value="")},null,40,gn),_("div",_n,[_("div",vn,[g(xe,{name:"upload"}),d(s)==="zh"?($(),L("p",bn,[_("span",wn,[K(E(d(a).dragUrl),1),_("span",yn,E(d(a).click),1)])])):($(),L("p",Cn,[_("span",kn,[_("span",xn,E(d(a).click)+" ",1),K(E(d(a).dragUrl),1)])]))])])]))])])),g(Ke,{open:d(p),title:d(w),footer:null,onCancel:pe,width:"auto",centered:""},{default:A(()=>[_("img",{alt:"example",style:{"max-width":"100%","max-height":"80vh",height:"auto",width:"auto",margin:"0 auto"},src:d(y)},null,8,Nn)]),_:1},8,["open","title"])])]),_:1},8,["open","title"])])}}}),Fn=j(Pn,[["__scopeId","data-v-20574e15"]]),On=l=>(Pe("data-v-f21bf3f2"),l=l(),Fe(),l),zn={class:"new-bots-comp"},Tn={class:"item-title"},Dn=On(()=>_("span",null,"*",-1)),Un={class:"item-title"},Hn={class:"footer"},Vn=T({__name:"NewBotsDialog",setup(l){const{changePage:n}=Te(),{newBotsVisible:i}=F(ve()),{setNewBotsVisible:h,setCurBot:c,setTabIndex:u}=ve(),{setQaList:b}=qt(),e=H().bots,o=H().common,t=N(!1),a=N(null),s=ut({name:"",introduction:""}),r=async p=>{try{const y=await Q(await q.queryBotInfo({bot_id:p}));c(y[0])}catch(y){P.error(y.msg||"获取Bot信息失败")}},f=async p=>{console.log("Success:",p);try{const y=await Q(await q.createBot({bot_name:p.name,description:p.introduction}));await r(y.bot_id),P.success(e.creationSuccessful),u(0),b([]),s.name="",s.introduction="",a.value=null,n(`/bots/${y.bot_id}/edit`)}catch(y){P.error(y.msg||"创建失败")}h(!1)},v=p=>{console.log("Failed:",p)};return(p,y)=>{const w=de,m=Oe,x=dt,C=he,k=ze,I=fe;return $(),Y(ue,{to:"body"},[g(I,{open:d(i),"onUpdate:open":y[3]||(y[3]=S=>ee(i)?i.value=S:null),title:d(e).createBots,centered:"",destroyOnClose:!0,width:"480px","wrap-class-name":"new-bot-modal",footer:null},{default:A(()=>[_("div",zn,[g(k,{model:d(s),name:"new_bots",class:"new-bots-form",onFinish:f,onFinishFailed:v},{default:A(()=>[g(m,{name:"name",rules:[{required:!0,message:d(e).nameCantEmpty}]},{default:A(()=>[_("div",Tn,[K(E(d(e).botName)+" ",1),Dn]),g(w,{class:"name-input",value:d(s).name,"onUpdate:value":y[0]||(y[0]=S=>d(s).name=S),placeholder:d(e).inputName,"show-count":"",maxlength:20,"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["rules"]),g(m,{name:"introduction"},{default:A(()=>[_("div",Un,E(d(e).botFunctionIntro),1),g(x,{class:"intro-input",value:d(s).introduction,"onUpdate:value":y[1]||(y[1]=S=>d(s).introduction=S),placeholder:d(e).introBotFunction,"show-count":"",maxlength:200,"auto-size":{minRows:3,maxRows:3}},null,8,["value","placeholder"])]),_:1}),g(m,null,{default:A(()=>[_("div",Hn,[g(C,{class:"cancel-btn",onClick:y[2]||(y[2]=S=>d(h)(!1))},{default:A(()=>[K(E(d(o).cancel),1)]),_:1}),g(C,{loading:d(t),type:"primary","html-type":"submit",class:"login-form-btn"},{default:A(()=>[K(E(d(o).confirm2),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])])]),_:1},8,["open","title"])])}}}),qn=j(Vn,[["__scopeId","data-v-f21bf3f2"]]),Kn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAK9SURBVFiFxZc9SBxRFIW/uzjVSgi4gYCNWCx2JpYigoGAKZPOMhbzhC2SFBaChYJgYZFYDONMYWtn0ikEIshiabKdGDBtIGsT1GaGuSl8s4yyu+7PaE4zP28455u38+67C/9Z0slDQRBMAG+AKWAMKNmhOnACVIFdY8xxrgBBEMyIyJqqTnZkJnKkqsvGmIO+ADzPG3QcZ0NVF+ytuqruAPuqWhsaGvoNcH5+/lRExoFZEZnDzoyIbEVRtFipVC66Btje3n4SRdFXYBy4BNbjON68y8zzvMGBgYF3wBJQBGqO47ycn5//0zGANakC46p6VigUXrmue3rXW2QVhmE5SZI9ERkFanEcT7WDL2QvHMfZSMNVdbrbcADXdU9VdVpVz4Bx69lSjRkIgmAG+AZcishEL+FZhWFYVtVjrn+OF60+zMYMiMiaPV3vNxyuZwJYv+XdHCAIggm71OpxHG/2G57KetVVddLWkuYAXBcZVHWnk6XTqSqVyoVdvo2MVgBT9rifV3hGqedUs8EUYAxAVWt5p2c8x9oBlADSCpenMp6lZuOFZjcfUilAHa5re94BGc96O4ATALux5KqM50k7gKo9zuYNkPGsNhtMAXYBRGTO87zBvJI9zxu023QjoymAMeZYRI6Akt1Sc5H1KonIUatuqbEKVHXZni6FYVjuN9x6LN3ybg1gjDkQkS2gmCTJnu/7w72G+74/nCTJHlAUka12LdqNOhBF0SJQE5FRETnsZSbCMCyLyGHakFjPlrrPlgxVLS8sLPzsCiA166cpBf4Cj4AvxpjXXQOk6rUtT5LkV6FQOABGgFVjzEpPABmQrv+YhGH4TFW/28sPxphPPQP0qiAI3gMfAUTkueu6P24/c6+7oX3rVQBV/ez7/siDAliIFeALMGK/ixsauG8AgKurq7fFYvHxQ2R1rX+LYk0uyg453wAAAABJRU5ErkJggg==",xt=l=>(Pe("data-v-47573b68"),l=l(),Fe(),l),Gn={class:"select-kenoledge-comp"},Yn={class:"header"},jn=xt(()=>_("img",{class:"search-icon",src:Kn,alt:"search-icon"},null,-1)),Wn={class:"content"},Xn=xt(()=>_("img",{src:Kt,alt:"knowledge"},null,-1)),Zn={class:"detail-info"},Qn={class:"kb-name"},Jn=["onClick"],es={class:"bottom-text"},ts=T({__name:"SelectKnowledgeDialog",setup(l){const{changePage:n}=Te(),{selectKnowledgeVisible:i,knowledgeList:h,curBot:c}=F(ve()),{setCurBot:u}=ve(),{setNavIndex:b}=ot(),e=N(""),o=H().bots,t=H().common,a=re(()=>new RegExp(e.value,"i")),s=async y=>{try{const w=await Q(await q.queryBotInfo({bot_id:y}));u(w[0])}catch(w){P.error(w.msg||"获取Bot信息失败")}},r=async y=>{const w=c.value.kb_ids;w.push(y.kb_id),console.log("kbIds",w);try{await Q(await q.updateBot({bot_id:c.value.bot_id,kb_ids:w})),s(c.value.bot_id),h.value=h.value.map(m=>(m.kb_id===y.kb_id&&(m.state=m.state===0?1:0),m))}catch(m){P.error(m.msg||"请求失败")}},f=async y=>{let w=c.value.kb_ids;console.log("removeKb",y,w),w=w.filter(m=>m!=y.kb_id);try{await Q(await q.updateBot({bot_id:c.value.bot_id,kb_ids:w})),s(c.value.bot_id),h.value=h.value.map(m=>(m.kb_id===y.kb_id&&(m.state=m.state===0?1:0),m)),P.success(o.removalSucessful)}catch(m){P.error(m.msg||"请求失败")}},v=y=>{console.log("handleKbBind",y),y.state===0?r(y):f(y)},p=()=>{b(0),n("/home"),i.value=!1};return(y,w)=>{const m=de,x=he,C=fe;return $(),Y(ue,{to:"body"},[g(C,{open:d(i),"onUpdate:open":w[1]||(w[1]=k=>ee(i)?i.value=k:null),title:d(o).selectKb,centered:"",destroyOnClose:!0,width:"600px","wrap-class-name":"select-knowledge-modal",footer:null},{default:A(()=>[_("div",Gn,[_("div",Yn,[g(m,{class:"select-input",value:d(e),"onUpdate:value":w[0]||(w[0]=k=>ee(e)?e.value=k:null),placeholder:d(o).search},{prefix:A(()=>[jn]),_:1},8,["value","placeholder"]),g(x,{class:"btn",type:"primary",onClick:p},{default:A(()=>[K(E(d(o).createKb),1)]),_:1})]),_("div",Wn,[($(!0),L(te,null,le(d(h).filter(k=>d(a).test(k.kb_nmame)),k=>($(),L("div",{class:"knowledge-item",key:k.kbId},[Xn,_("div",Zn,[_("div",Qn,E(k.kb_name),1)]),_("div",{class:ie(["button",`button-${k.state}`,`button-${d(t).type}-${k.state}`]),onClick:I=>v(k)},null,10,Jn)]))),128)),_("div",es,E(d(o).noMore),1)])])]),_:1},8,["open","title"])])}}}),os=j(ts,[["__scopeId","data-v-47573b68"]]),ns={class:"copy-url-comp"},ss={class:"title"},as={class:"copy-url"},ls={class:"copy-url-span"},is={class:"title"},rs={class:"qr-code-content"},cs=T({__name:"CopyUrlDialog",setup(l){const{copyUrlVisible:n,webUrl:i}=F(ve()),h=N(null),c=H().bots;P.config({top:"100px",duration:2,maxCount:3});const u=async()=>{const b=await h.value.toDataURL(),e=document.createElement("a");e.download="QRCode.png",e.href=b,document.body.appendChild(e),e.click(),document.body.removeChild(e)};return(b,e)=>{const o=yo,t=he,a=fe;return $(),Y(ue,{to:"body"},[g(a,{open:d(n),"onUpdate:open":e[0]||(e[0]=s=>ee(n)?n.value=s:null),title:d(c).copyLink,centered:"",destroyOnClose:!0,"wrap-class-name":"select-knowledge-modal",footer:null},{default:A(()=>[_("div",ns,[_("div",ss,E(d(c).UrlLink),1),_("div",as,[_("span",ls,E(d(i)),1)]),_("div",is,E(d(c).qrCode),1),_("div",rs,[g(o,{ref_key:"qrcode",ref:h,value:d(i),bgColor:"#fff"},null,8,["value"]),g(t,{class:"btn save-btn",onClick:u},{default:A(()=>[K(E(d(c).save),1)]),_:1})])])]),_:1},8,["open","title"])])}}}),us=j(cs,[["__scopeId","data-v-537c1f5d"]]),ds={class:"tools-box"},hs={class:"tool-name"},fs={class:"tool-name"},ps={class:"content"},ms={class:"title"},gs={class:"title-text"},_s=T({__name:"SiderCardItem",props:{cardData:{}},setup(l){const{setShowDeleteModal:n,setCurrentId:i,setCurrentKbName:h,setDefault:c}=X(),{showDeleteModal:u}=F(X()),b=H().common,{chatId:e,showLoading:o,deleteChatId:t}=F(_e()),a=l,{cardData:s}=Dt(a),r=v=>{i(v.kb_id),h(v.kb_name),c(Le.optionlist)},f=v=>{t.value=s.value.historyId,n(!u.value),i(v.kb_id),console.log(`删除${v.kb_id}`)};return(v,p)=>{const y=ce,w=ht;return $(),L("div",{class:ie(["card",d(e)===d(s).historyId?"active":"",d(o)?"disabled":""])},[g(w,{"overlay-class-name":"card-hover",placement:"right"},{content:A(()=>[_("div",ds,[_("ul",null,[_("li",{onClick:p[0]||(p[0]=m=>r({kb_name:d(s).title,kb_id:d(s).kbId}))},[g(y,{class:"edit",name:"icon-manage"}),_("span",hs,E(d(b).manage),1)]),_("li",{onClick:p[1]||(p[1]=m=>f({kb_name:d(s).title,kb_id:d(s).kbId}))},[g(y,{class:"delete",name:"delete"}),_("span",fs,E(d(b).delete),1)])])])]),default:A(()=>[_("div",ps,[_("div",ms,[_("p",gs,E(d(s).title),1)])])]),_:1})],2)}}}),vs=j(_s,[["__scopeId","data-v-62eb2a89"]]),bs={class:"sider"},ws={key:0,class:"knowledge"},ys={class:"add-btn"},Cs={class:"content"},ks={key:1,class:"bots"},xs={key:2,class:"quick-start"},Ss={class:"content"},As=T({__name:"Sider",setup(l){const{knowledgeBaseList:n,currentKbName:i}=F(X()),{historyList:h,showLoading:c,chatId:u,QA_List:b,kbId:e}=F(_e()),{getChatById:o,addHistoryList:t,updateHistoryList:a,addChatList:s,addFileToBeSendList:r}=_e(),{uploadFileListQuick:f}=F(Ye()),{initUploadFileListQuick:v}=Ye(),{navIndex:p}=F(ot()),{changePage:y}=Te();function w(C,k){b.value.push({question:C,type:"user",fileDataList:k})}function m(C,k,I,S,Z,z){b.value.push({answer:I,itemInfo:k,question:C,type:"ai",qaId:Z,copied:!1,like:!1,unlike:!1,source:z||[],showTools:!0,picList:S})}const x=async(C,k)=>{if(!c.value){if(f.value.length&&(r(u.value,[...f.value]),v()),C===0){const I=await Q(await q.createKb({kb_name:"未命名对话",quick:!0}));e.value=I.kb_id,b.value=[],u.value=t("未命名对话"),a("未命名对话",u.value,e.value),s(u.value,b.value)}else if(C===1){if(u.value===k.historyId)return;u.value=k.historyId,b.value=[],e.value=k.kbId,i.value=k.title,Ht(()=>{o(u.value).list.forEach(S=>{S.type==="user"?w(S.question,S.fileDataList):S.type==="ai"&&m(S.question,S.itemInfo,S.answer,S.picList,S.qaId,S.source)})})}}};return Ut(()=>{b.value=[],u.value=null,e.value=""}),(C,k)=>($(),L("div",bs,[d(p)===0?($(),L("div",ws,[_("div",ys,[g(ko)]),_("div",Cs,[g(Do,{list:d(n)},null,8,["list"])])])):d(p)===1?($(),L("div",ks,[_("div",{class:"bots-tab",onClick:k[0]||(k[0]=I=>d(y)("/bots"))},E(d(H)().bots.myBots),1),g(qn),g(os),g(us)])):d(p)===2?($(),L("div",xs,[_("div",Ss,[_("div",{class:ie(["card-new",d(u)===null?"active":"",d(c)?"disabled":""]),onClick:k[1]||(k[1]=I=>x(0))},[g(ce,{name:"new-chat"}),K(" "+E(d(H)().home.newConversationQuick),1)],2),($(!0),L(te,null,le(d(h),I=>($(),Y(vs,{key:I.historyId,"card-data":I,onClick:S=>x(1,I)},null,8,["card-data","onClick"]))),128))])])):ct("",!0),g(Yt),g(en),g(Xo),g(Fn)]))}}),$s=j(As,[["__scopeId","data-v-b48b6d48"]]),Js=T({__name:"index",setup(l){return(n,i)=>{const h=ao,c=Vt("router-view"),u=lo,b=io;return $(),Y(b,null,{default:A(()=>[g(At),g(b,null,{default:A(()=>[g(h,{width:"280",style:{background:"#fff"}},{default:A(()=>[g($s)]),_:1}),g(b,null,{default:A(()=>[g(u,{class:"main"},{default:A(()=>[g(c)]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Js as default};
