import{_ as Ce}from"./bot-avatar-CBCRm2Zm.js";import{_ as Je}from"./knowledge-zhu8jsrY.js";import{u as ue}from"./useBots-Bdp-FPKz.js";import{r as G,u as J,a as eo,b as oo}from"./utils-DbfuPucX.js";import{g as de,u as to}from"./index-Cuc3aVWz.js";import{d as pe,a1 as W,r as k,c as so,o as no,a2 as l,a3 as i,a4 as t,e as n,M as o,ae as O,a8 as _,a6 as B,a7 as z,F as M,a5 as ee,a9 as h,af as C,aa as Se,ab as Be,ac as _e,v as F,x,ad as we,ak as Y,aS as ao,K as ie,ai as y,z as lo,ag as re}from"./index-Bkza4F2y.js";import{I as Te,e as co,r as io,_ as ro,c as uo}from"./useChatSource-CPh6Cl6Z.js";import{D as De}from"./RightOutlined-dMEGH5_5.js";import{a as po,b as _o,u as ho,D as vo,h as go,_ as ye,c as Fe,T as mo,f as fo}from"./HighLightMarkDown.vue_vue_type_style_index_0_lang-DbOxf9OD.js";import{_ as ko}from"./lock-DmQwPPsI.js";import{u as be}from"./useBotsChat-DjLrvNdT.js";import{D as Ao,_ as wo,M as yo}from"./index-C7X8aNbm.js";import{D as bo}from"./DownOutlined-BJ-C1aTr.js";import{_ as Co}from"./index-Bwp-5qOW.js";import"./collapseMotion-B6TIEPR5.js";const So="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAQBSURBVFiF1Zk/aBtnFMB/73TWUJwUi0CoS4KHxEPw4n+0aQMpGWwPLaQYeywt0l0OFxwC7ZohawuhHoR9Z2jwaFEayFDbgyGQ4BaEp5DBWURCFZoauSTOoujuZdB3RpKNY8e25P4m6b67e7+7033fe0/C+yGO41wErgADItINdAInzPgroKiqa0AeWA6CYAXQfQfaz86u655V1QkR+Qb4aJ+xnqvqnIhkfd9/eqiCmUzmdCKRuKmqDtBmNj8BFkXkgao+LpfLz7q6ul4CFAqFk8lk8oyIXFDVS8AwcN4c90ZEgjAMb83Ozv5zYEHHcb4VkZ+AU0AFmAemfN//ay8XF+O67ifAJDAO2MC6qv4YBMGd9xIcGxtLplKp26o6YTYtqOr1IAjW9iPWiOM43SLyCzACICLZUql0I5fLlfcsODEx0V6pVH4DhoBN4Aff92cOItaI67rXgJ+BdmDJtu3RbDa7+U7BsbGxZEdHxz1gSFWLiURieHp6+tFhysV4ntcThuGiiHQCSxsbG1813kmr8aBUKnU7loui6PJRyQFMT08/iqLosqoWgSETu466O2heiF+BTcuyLh6lXC2e5/VEUbQCtKvqd7UvTiL+kMlkTluWdRf4AJicmZn5oxlyAPl8/kV/f38J+FJELvX29s6trq6+hppHnEgkblKdShYO+4XYCybmAnDKuLAlaFYIB6io6vVmy8WY2BVVdVzXPbslaOa6NmD+oPPcQTCx54G2eP61ADFrK8BUq+RqmAIwTiKO43wmIg+BJ77vd7fWrYrrumvAeVX93KKaMgEsttCpkdjligUMAIjIg9b51FPjMmCZZBNVfdxCpzpiFxHptqhmwpTL5WcttaqhxqXTxqTpcbK5G67r/g5cPWD8u77vf73bDl1dXS+LxSLAiW3JwnHDplrgfFgoFE4C/+2287uu/LAwJQPAKwsoAiSTyTPNCL4XalyKlikNEZELLXSqI3ZR1TWLat2Kqb6OBTUueQtYNl+GW+SzE7HLsgDiuu7fVAvxT/dbTh42pjz9E3ju+/7HFqCqOmfGJ1untsUkgHFSC6q1KfAGGHccp2UZjYk9TrX7kAWTsPq+/1REAsA2RXVLMLFtEQni/s3WShKG4S1gHRgxRXVTMTFHgHXjAtRUdaurq6/7+vr+FZGrwBeDg4P38vn8i2bIeZ7Xo6rzQFJVv5+dnX0Yj9WtxUEQ3DHPvj0Mw8V0On3uqOXS6fS5MAwXgXYRyTY2k7YlC6VS6QawJCKdlmXd9zyv56jkPM/rsSzrftz6MLHr2CaYy+XKtm2PxpJRFK0cxW/Sdd1rURStxHK2bY/u1OH6f7bfGk54PBuYtRzrFnAtx7aJvtNxzfob4i2ESvnrjyWOcQAAAABJRU5ErkJggg==",Bo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAOBSURBVFiFzZixdeJAEIb/WZAiAjqADiiBwAUQOHOg97BlhQQUQEABBIRCZ7+ngMwBBThQARfQgegAv4cTOHYuuFksQBJIYM5/AojVzqcZ7ezsEDNX8IOl/jfAKVUvuTkMw/p6vW4TUUNrXWfmBgAQ0UIptWTmhW3bkeM4y7I2qGiIwzCsbzYbZ7vddoioxcz1k0aIZkQ0c103/FZA3/d7RDQwUES0ZOY5gDkRLYkoBgBmbsqYFoB2YopYKTUsAnoW4Ovra2uz2bwBaMqlSCk1Pid85jXQWvcSsHGtVrt7eHhYXAwYBIHDzCPxSCQeiE5NnDWX1noAoCkef3Jdd1YacDKZDJh5ID/Hnuf1y4Adyvf9EYAeABDR8Pn5eVgYMAiCjtb6TX72Pc8bXwPOKPnwSqnHrPcyFXA6nTY+Pz9/M3P91BNeIt/3ewBGRLSsVqt33W53fjgmNVGvVqt3eefG3wUHABKVMTPXZREe6QgwCAIH/1ZrfK13Lk9iIwLQFI/mA8oqg1KqsOeCIHDSjJySsUVEgzAM9xL/HmDCe1GZrK+1fgEwKnqfpK1IQu1kAjJzBwCUUlddsefI2Nxut5296+ZLGIZ1A2jbdqlEfIls244kebeSYd4Brtdrsw1dVH2UleM4S2aeM3M9wfIFSEQN+XqUi26o+QHLF6DWeleh3J7rn4xtwwIkCtZEsRnnTSIb/kveGN/3/2T8lbtlElHMzDsWoETJn3y6olJKFY7OzoNEtBD6Zt4NZntK+894zvO8UkcJY5uIdnVicpHEMqi0hy6VsZ30dDLEH/LZuiXUgVoAwMzHHsxKlLeS2GwbliPArER5KxmbRDRLbhR7q7hSqcwAQA44N5WxSUR7Z5Q9QMuyQkmW7SAIynixr5R6LHqTVFFtAPFhFbUHKGEeAl91YRF5njcuWaZl1qBHiVryXAygLaevb5XYaCLFe6mAAGBZ1r2EulemQj5Xk8lkAKBHRMtarXaXNiYVsNvtzonInEdGMtFV5ft+zxw7iegpq8uQuRe7rhsS0RAAmHlwzXDLXCOBG+Z1F85pfXSY+ZdsQ4WbPwdztWVBtGVT6J+a66zm0XQ6baxWq3dcsXlkWdZ92kG9FKBRsvmTuBwhp/2W7CFKu25YpI1SuIFpQJm5Yw5ZuQakh1ipVGaWZYVFzzulAI3yWsDizY+bt4BvrR/f5f8LxA8rSSHVBD4AAAAASUVORK5CYII=",oe=g=>(Se("data-v-8b27a8af"),g=g(),Be(),g),To={class:"bot-detail-edit-comp"},Do={class:"name-avatar"},Fo=oe(()=>t("img",{src:Ce,alt:"avatar"},null,-1)),xo={class:"title"},qo={class:"title"},Io={class:"title"},Lo=oe(()=>t("span",null,"*",-1)),Ro=oe(()=>t("img",{class:"knowledge-icon",src:Je,alt:"knowledge"},null,-1)),Uo={class:"kb-name"},Eo=["onClick"],Vo=oe(()=>t("img",{class:"add-knowedge",src:Bo,alt:"icon"},null,-1)),Ko={class:"save"},Qo=pe({__name:"BotDetailEdit",setup(g){const{curBot:A,knowledgeList:b}=W(ue()),{setSelectKnowledgeVisible:L,setCurBot:R}=ue(),u=de().bots,U=k(""),T=k(""),E=k(""),V=so(()=>T.value.match(/[^a-zA-Z\s]|\p{P}|\w+/g));no(()=>{console.log("curBot",A.value),U.value=A.value.bot_name,E.value=A.value.welcome_message,T.value=A.value.prompt_setting});const P=async m=>{try{const d=await G(await J.queryBotInfo({bot_id:m}));console.log("getBotInfo",d),R(d[0])}catch(d){C.error(d.msg||"获取Bot信息失败")}},te=async()=>{try{await G(await J.updateBot({bot_id:A.value.bot_id,bot_name:U.value,prompt_setting:T.value,welcome_message:E.value})),P(A.value.bot_id),C.success(u.saveSuccessful)}catch(m){console.log("error--",m),C.error(m.msg||"保存失败，请重试")}},q=async m=>{let d=A.value.kb_ids;console.log("removeKb",m,d),d=d.filter(v=>v!=m);try{await G(await J.updateBot({bot_id:A.value.bot_id,kb_ids:d})),P(A.value.bot_id),b.value=b.value.map(v=>(v.kb_id===m&&(v.state=v.state===0?1:0),v)),C.success(u.removalSucessful)}catch(v){C.error(v.msg||"请求失败")}};return(m,d)=>{const v=Te,I=co,S=De;return l(),i("div",To,[t("div",Do,[Fo,n(v,{value:o(U),"onUpdate:value":d[0]||(d[0]=f=>O(U)?U.value=f:null),placeholder:o(u).inputBotName,"show-count":"",maxlength:20},null,8,["value","placeholder"])]),t("div",xo,_(o(u).roleSetting),1),n(I,{class:"role-setting-input",value:o(T),"onUpdate:value":d[1]||(d[1]=f=>O(T)?T.value=f:null),"auto-size":{minRows:7,maxRows:7},rows:7},null,8,["value"]),t("div",{class:B(["role-setting-length",o(V)&&o(V).length>2e3?"over-length":""])},_(o(V)?o(V).length:0)+" / 2000 ",3),t("div",qo,_(o(u).welcomeMessage),1),n(I,{class:"greeting-input",value:o(E),"onUpdate:value":d[2]||(d[2]=f=>O(E)?E.value=f:null),"show-count":"",maxlength:100,placeholder:o(u).inputWelcomMsg,"auto-size":{minRows:6,maxRows:6},rows:6},null,8,["value","placeholder"]),t("div",Io,[z(_(o(u).associatedKb),1),Lo]),(l(!0),i(M,null,ee(o(A).kb_ids,(f,X)=>(l(),i("div",{class:"knowedge-item knowledge-info",key:f},[Ro,t("div",Uo,_(o(A).kb_names[X]),1),t("img",{class:"remove-icon",src:So,alt:"remove",onClick:K=>q(f)},null,8,Eo)]))),128)),t("div",{class:"knowedge-item add-knowledge-content",onClick:d[3]||(d[3]=f=>o(L)(!0))},[Vo,z(" "+_(o(u).clickAssociatedKb),1)]),t("div",Ko,[n(S,{class:"save-btn",type:"primary",onClick:te},{default:h(()=>[z(_(o(u).save),1)]),_:1})])])}}}),Ho=_e(Qo,[["__scopeId","data-v-8b27a8af"]]),N=g=>(Se("data-v-33f2b224"),g=g(),Be(),g),zo={class:"bots-chat-container"},Yo={class:"my-page"},Mo={class:"header"},Xo=N(()=>t("img",{src:Ce,alt:"avatar"},null,-1)),Zo={id:"chat",class:"chat"},Wo={class:"ai"},Oo={class:"content"},No=N(()=>t("img",{class:"avatar",src:Fe,alt:"头像"},null,-1)),Po=["innerHTML"],jo={key:0,class:"user"},$o=N(()=>t("img",{class:"avatar",src:uo,alt:"头像"},null,-1)),Go={class:"question-text"},Jo={key:1,class:"ai"},et={class:"content"},ot=N(()=>t("img",{class:"avatar",src:Fe,alt:"头像"},null,-1)),tt={key:1},st={key:0},nt={key:1},at={class:"source-list"},lt={class:"control"},ct={class:"tips"},it=["href"],rt=["onClick"],ut={class:"source-content"},dt={class:"score"},pt={class:"tips"},_t={key:2,class:"feed-back"},ht=["onClick"],vt={class:"reload-text"},gt={class:"tools"},mt={class:"stop-placeholder"},ft={class:"question-box"},kt={class:"question"},At={key:0},wt={key:1},yt={key:0},bt={key:1},Ct={key:0},St={key:1},Bt={key:0},Tt={key:1},Dt={class:"send-plane"},Ft={key:0,class:"mask"},xt=N(()=>t("img",{src:ko,alt:"icon"},null,-1)),qt=pe({__name:"Chat",props:{chatType:{type:String,default:"edit"},botInfo:{type:Object,default:()=>{}}},setup(g){const A=g,b=de().common,L=de().bots,R=new mo(e=>{e&&(u.value[u.value.length-1].answer+=e||"")}),{QA_List:u}=W(be()),{copy:U}=po(),{setChatSourceVisible:T,setSourceType:E,setSourceUrl:V,setTextContent:P}=io(),{language:te}=W(to()),q=k(!1),m=k(!0),d=k(!1),v=k(""),I=k([]),S=k(!1),f=k([]),X=k(!1);let K;const se=k(null),xe=k(null),Z=()=>{ie(()=>{var e;(e=se.value)==null||e.scrollIntoView(!1)})},qe=_o((e,c)=>{if(e.like=!e.like,e.unlike=!1,e.like){c.target.parentNode.style.animation="shake ease-in .5s";const w=setTimeout(()=>{clearTimeout(w),c.target.parentNode.style.animation=""},600)}},800),Ie=e=>{e.unlike=!e.unlike,e.like=!1},Le=e=>{U(e.answer).then(()=>{e.copied=!e.copied,C.success(b.copySuccess,1);const c=setTimeout(()=>{clearTimeout(c),e.copied=!e.copied},1e3)}).catch(()=>{C.error(b.copyFailed,1)})},Re=e=>{u.value.push({question:e,type:"user"}),Z()},Ue=e=>{u.value.push({answer:"",question:e,type:"ai",copied:!1,like:!1,unlike:!1,source:[],picList:null,showTools:!1})},Ee=()=>{K&&K.abort(),R.done(),S.value=!1,u.value[u.value.length-1].showTools=!0},ne=()=>{var w;if(!v.value.length)return;const e=v.value;v.value="",Re(e),I.value.length>=3&&(I.value=[]),S.value=!0,(w=se.value)==null||w.scrollIntoView(!0),K=new AbortController;const c={"Content-Type":"application/json",Accept:["text/event-stream","application/json"],"Transfer-Encoding":"chunked",Connection:"keep-alive"};fo(oo+"/local_doc_qa/local_doc_chat",{method:"POST",headers:c,openWhenHidden:!0,body:JSON.stringify({user_id:eo,bot_id:A.botInfo.bot_id,history:m.value?I.value:[],question:e,streaming:!0,networking:q.value,hybrid_search:d.value,product_source:"saas"}),signal:K.signal,onopen(r){if(console.log("open"),r.ok&&r.headers.get("content-type")==="text/event-stream")console.log("everything's good"),Ue(e),R.start();else if(r.headers.get("content-type")==="application/json")return S.value=!1,r.json().then(s=>{console.log(s),C.error((s==null?void 0:s.msg)||"出错了,请稍后刷新重试。")}).catch(s=>{console.log(s),C.error("出错了,请稍后刷新重试。")})},onmessage(r){var D,$;console.log("message");const s=JSON.parse(r.data);console.log(s),(s==null?void 0:s.code)==200&&(s!=null&&s.response)&&!((D=s==null?void 0:s.history)!=null&&D.length)&&(R.add(s==null?void 0:s.response.replaceAll(`
`,"<br/>")),Z()),($=s==null?void 0:s.source_documents)!=null&&$.length&&(u.value[u.value.length-1].source=s==null?void 0:s.source_documents),s!=null&&s.history.length&&(I.value=s==null?void 0:s.history)},onclose(r){console.log("close"),console.log(r),R.done(),K.abort(),S.value=!1,u.value[u.value.length-1].showTools=!0,ie(()=>{Z()})},onerror(r){throw console.log("error",r),R.done(),K.abort(),S.value=!1,u.value[u.value.length-1].showTools=!0,ie(()=>{Z()}),r}})},Ve=e=>{console.log("reAnswer"),v.value=e.question,ne()},Ke=(e,c)=>{e.source[c].showDetailDataSource=!1},Qe=(e,c)=>{e.source[c].showDetailDataSource=!e.source[c].showDetailDataSource},He=e=>{f.value.push(e)},ze=e=>{f.value=f.value.filter(c=>c!==e)},{showModal:he}=W(ho()),{clearQAList:Ye}=be(),ae=k(!1),le=k(""),j=k(""),ve=()=>{m.value=!m.value},Me=()=>{j.value="download",he.value=!0,le.value=b.saveTip},Xe=async()=>{if(ae.value=!0,j.value==="download"){console.log("download");try{const e=document.getElementById("chat-ul"),w=(await go(e,{useCORS:!0})).toDataURL("image/png"),r=document.createElement("a");r.style.display="none",r.href=w,r.setAttribute("download","chat-shot.png"),typeof r.download>"u"&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(w),C.success(L.downloadSuccessful),Promise.resolve()}catch(e){console.log(e),C.error(e.message||e.msg||"出错了")}}else j.value==="delete"&&(console.log("delete"),I.value=[],Ye());j.value="",le.value="",ae.value=!1,he.value=!1};let ge=["pdf","docx","xlsx","txt","jpg","png","jpeg"];const me=e=>{if(!e)return!1;const c=e.split(".");if(c.length){const w=c.pop();return!!ge.includes(w)}else return!1},Ze=e=>{console.log("handleChatSource",e),me(e.file_name)&&We(e)};async function We(e){try{V(null);const c=await G(await J.getFile({file_id:e.file_id}));console.log("queryFile",c);const w=e.file_name.split(".").pop(),r=Ne(w);if(console.log("b64Type",r),E(w),V(`data:${r};base64,${c.base64_content}`),w==="txt"){const s=atob(c.base64_content),D=decodeURIComponent(escape(s));console.log("decodedTxt",D),P(D),T(!0)}else T(!0)}catch(c){C.error(c.msg||"获取文件失败")}}let Oe=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","image/jpeg","image/png","image/jpeg"];function Ne(e){const c=ge.indexOf(e);return Oe[c]}const Pe=()=>{q.value=!q.value},je=()=>{d.value=!d.value};function ce(){return document.getElementsByClassName("question-box")[0]}return Z(),(e,c)=>{const w=Co,r=De,s=ro,D=wo,$=yo,$e=Ao,Ge=Te;return l(),i(M,null,[t("div",zo,[t("div",Yo,[t("div",Mo,[Xo,z(" "+_(g.botInfo.bot_name),1)]),t("div",Zo,[t("ul",{id:"chat-ul",ref_key:"scrollDom",ref:se},[t("div",Wo,[t("div",Oo,[No,t("p",{class:"question-text",innerHTML:g.botInfo.welcome_message},null,8,Po)])]),(l(!0),i(M,null,ee(o(u),(a,Q)=>{var fe,ke;return l(),i("li",{key:Q},[a.type==="user"?(l(),i("div",jo,[$o,t("p",Go,_(a.question),1)])):(l(),i("div",Jo,[t("div",et,[ot,t("p",{class:B(["question-text",[!a.source.length&&!((fe=a==null?void 0:a.picList)!=null&&fe.length)?"change-radius":"",a.showTools?"":"flashing"]])},[a.answer?(l(),we(ye,{key:0,content:a.answer},null,8,["content"])):(l(),i("span",tt,_(a.answer),1))],2)]),(ke=a==null?void 0:a.picList)!=null&&ke.length?(l(!0),i(M,{key:0},ee(a.picList,(p,H)=>(l(),i("div",{key:p+H,class:B(["data-picList",!a.source.length&&H+1===a.picList.length?"picList-radius":""])},[n(w,{width:150,src:p,class:"responsive-image"},null,8,["src"])],2))),128)):Y("",!0),a.source.length?(l(),i(M,{key:1},[t("div",{class:B(["source-total",o(f).includes(Q)?"":"source-total-last"])},[o(te)==="zh"?(l(),i("span",st,"找到了"+_(a.source.length)+"个信息来源：",1)):(l(),i("span",nt,"Found "+_(a.source.length)+" source of information",1)),F(n(y,{name:"down",onClick:p=>He(Q)},null,8,["onClick"]),[[x,!o(f).includes(Q)]]),F(n(y,{name:"up",onClick:p=>ze(Q)},null,8,["onClick"]),[[x,o(f).includes(Q)]])],2),F(t("div",at,[(l(!0),i(M,null,ee(a.source,(p,H)=>(l(),i("div",{key:H,class:"data-source"},[F(t("p",lt,[t("span",ct,_(o(b).dataSource)+_(H+1)+":",1),p.file_id.startsWith("http")?(l(),i("a",{key:0,href:p.file_id,target:"_blank"},_(p.file_name),9,it)):(l(),i("span",{key:1,class:B(["file",me(p.file_name)?"filename-active":""]),onClick:Ae=>Ze(p)},_(p.file_name),11,rt)),F(n(y,{name:"iconup",onClick:Ae=>Ke(a,H)},null,8,["onClick"]),[[x,p.showDetailDataSource]]),F(n(y,{name:"icondown",onClick:Ae=>Qe(a,H)},null,8,["onClick"]),[[x,!p.showDetailDataSource]])],512),[[x,p.file_name]]),n(lo,{name:"sourceitem"},{default:h(()=>[F(t("div",ut,[n(ye,{content:p.content?p.content:""},null,8,["content"]),t("p",dt,[t("span",pt,_(o(b).correlation),1),z(_(p.score),1)])],512),[[x,p.showDetailDataSource]])]),_:2},1024)]))),128))],512),[[x,o(f).includes(Q)]])],64)):Y("",!0),a.showTools?(l(),i("div",_t,[t("div",{class:"reload-box",onClick:p=>Ve(a)},[n(y,{name:"reload"}),t("span",vt,_(o(b).regenerate),1)],8,ht),t("div",gt,[n(y,{style:re({color:a.copied?"#4D71FF":""}),name:"copy",onClick:p=>Le(a)},null,8,["style","onClick"]),n(y,{style:re({color:a.like?"#4D71FF":""}),name:"like",onClick:p=>o(qe)(a,p)},null,8,["style","onClick"]),n(y,{style:re({color:a.unlike?"#4D71FF":""}),name:"unlike",onClick:p=>Ie(a)},null,8,["style","onClick"])])])):Y("",!0)]))])}),128)),F(t("div",mt,null,512),[[x,o(S)]]),F(t("div",{ref_key:"stopBtn",ref:xe,class:"stop-btn"},[n(r,{onClick:Ee},{icon:h(()=>[n(y,{name:"stop",class:B(o(S)?"loading":"")},null,8,["class"])]),default:h(()=>[z(_(o(b).stop),1)]),_:1})],512),[[x,o(S)]])],512)]),t("div",ft,[t("div",kt,[n($e,{open:o(X),"onUpdate:open":c[0]||(c[0]=a=>O(X)?X.value=a:null),"overlay-class-name":"custom-dropdown"},{overlay:h(()=>[n($,null,{default:h(()=>[n(D,{key:"1"},{default:h(()=>[n(s,{placement:"right","get-container":ce,"overlay-class-name":"custom-popover"},{content:h(()=>[o(q)?(l(),i("p",At,"退出混合检索")):(l(),i("p",wt,"开启混合检索"))]),default:h(()=>[t("span",{class:B(["hybrid",`hybrid-${o(d)}`])},[n(y,{name:"hybrid_search",onClick:je})],2)]),_:1})]),_:1}),n(D,{key:"2"},{default:h(()=>[n(s,{placement:"right","get-container":ce,"overlay-class-name":"custom-popover"},{content:h(()=>[o(q)?(l(),i("p",yt,"退出联网检索")):(l(),i("p",bt,"开启联网检索"))]),default:h(()=>[t("span",{class:B(["network",`network-${o(q)}`])},[n(y,{name:"network",onClick:Pe})],2)]),_:1})]),_:1}),n(D,{key:"3"},{default:h(()=>[n(s,{placement:"right","get-container":ce,"overlay-class-name":"custom-popover"},{content:h(()=>[o(m)?(l(),i("p",Ct,"退出多轮对话")):(l(),i("p",St,"开启多轮对话"))]),default:h(()=>[t("span",{class:B(["control",`control-${o(m)}`])},[n(y,{name:"chat-control",onClick:ve})],2)]),_:1})]),_:1})]),_:1})]),default:h(()=>[n(r,{class:"operation-btn"},{default:h(()=>[z(" 操作 "),n(o(bo))]),_:1})]),_:1},8,["open"]),g.chatType==="share"?(l(),we(s,{key:0,placement:"topLeft"},{content:h(()=>[o(m)?(l(),i("p",Bt,_(o(L).multiTurnConversation2),1)):(l(),i("p",Tt,_(o(L).multiTurnConversation1),1))]),default:h(()=>[t("span",{class:B(["control",`control-${o(m)}`])},[n(y,{name:"chat-control",onClick:ve})],2)]),_:1})):Y("",!0),g.chatType==="share"?(l(),i("span",{key:1,class:"download",onClick:Me},[n(y,{name:"chat-download"})])):Y("",!0),n(Ge,{value:o(v),"onUpdate:value":c[1]||(c[1]=a=>O(v)?v.value=a:null),"max-length":"200",placeholder:o(b).problemPlaceholder,onKeyup:ao(ne,["enter"])},{suffix:h(()=>[t("div",Dt,[n(r,{type:"primary",disabled:o(S),onClick:ne},{default:h(()=>[n(y,{name:"sendplane"})]),_:1},8,["disabled"])])]),_:1},8,["value","placeholder"])])])]),!g.botInfo.kb_ids||!g.botInfo.kb_ids.length?(l(),i("div",Ft,[xt,t("p",null,_(o(L).bindKbtoPreview),1)])):Y("",!0)]),n(vo,{content:o(le),"confirm-loading":o(ae),onOk:Xe},null,8,["content","confirm-loading"])],64)}}}),It=_e(qt,[["__scopeId","data-v-33f2b224"]]),Lt={class:"edit-detail"},Rt={class:"bots-chat-page"},Ut=pe({__name:"EditDetail",setup(g){const{curBot:A}=W(ue());return(b,L)=>(l(),i("div",Lt,[n(Ho),t("div",Rt,[n(It,{"bot-info":o(A),"chat-type":"edit"},null,8,["bot-info"])])]))}}),$t=_e(Ut,[["__scopeId","data-v-99e5fd8d"]]);export{$t as default};
