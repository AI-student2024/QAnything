import{_ as Ce}from"./bot-avatar-CBCRm2Zm.js";import{_ as Ze}from"./knowledge-zhu8jsrY.js";import{u as pe}from"./useBots-15BkouYQ.js";import{r as J,u as ee,a as We,b as Ne,C as Pe}from"./utils-Ugh35qEN.js";import{g as he,u as je}from"./index-Ck4zvxVH.js";import{a as Ge,C as $e}from"./ChatInfoPanel-CVj06cqM.js";import{u as Se}from"./useChatSetting-DXI5K0PP.js";import{u as _e}from"./useBotsChat-DFU-TgEz.js";import{d as ge,x as Q,r as y,a as Be,o as Je,y as l,J as r,B as t,c,D as s,E as te,C as u,L as Y,T as z,F as O,K as oe,A as H,G as A,X as Te,Y as Ie,H as ve,N as D,O as L,R as V,a5 as et,a0 as ue,z as be,S,a2 as tt,M as de}from"./index-CVjowkL6.js";import{I as xe,_ as ot}from"./ActionButton-CtWgvvKY.js";import{B as Fe}from"./RightOutlined-B8T6erWu.js";import{u as st,a as at,b as nt,D as lt,h as ct,_ as De,T as it,f as rt}from"./html2canvas.esm-D1ke8z11.js";import{_ as ut}from"./avatar-CwuB3r1Y.js";import{_ as dt}from"./lock-DmQwPPsI.js";import{u as pt,_ as ht,I as _t}from"./useChatSource-Bckutulg.js";import"./index-xWCwNqZY.js";import"./index-wYqO6F8P.js";import"./initDefaultProps-U-O0SP5N.js";import"./slide-hliHECYM.js";import"./index-ChJhOcSY.js";import"./responsiveObserve-DIReCmpf.js";import"./collapseMotion-CK37t8ee.js";import"./class-DeKWk5pD.js";const gt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAQBSURBVFiF1Zk/aBtnFMB/73TWUJwUi0CoS4KHxEPw4n+0aQMpGWwPLaQYeywt0l0OFxwC7ZohawuhHoR9Z2jwaFEayFDbgyGQ4BaEp5DBWURCFZoauSTOoujuZdB3RpKNY8e25P4m6b67e7+7033fe0/C+yGO41wErgADItINdAInzPgroKiqa0AeWA6CYAXQfQfaz86u655V1QkR+Qb4aJ+xnqvqnIhkfd9/eqiCmUzmdCKRuKmqDtBmNj8BFkXkgao+LpfLz7q6ul4CFAqFk8lk8oyIXFDVS8AwcN4c90ZEgjAMb83Ozv5zYEHHcb4VkZ+AU0AFmAemfN//ay8XF+O67ifAJDAO2MC6qv4YBMGd9xIcGxtLplKp26o6YTYtqOr1IAjW9iPWiOM43SLyCzACICLZUql0I5fLlfcsODEx0V6pVH4DhoBN4Aff92cOItaI67rXgJ+BdmDJtu3RbDa7+U7BsbGxZEdHxz1gSFWLiURieHp6+tFhysV4ntcThuGiiHQCSxsbG1813kmr8aBUKnU7loui6PJRyQFMT08/iqLosqoWgSETu466O2heiF+BTcuyLh6lXC2e5/VEUbQCtKvqd7UvTiL+kMlkTluWdRf4AJicmZn5oxlyAPl8/kV/f38J+FJELvX29s6trq6+hppHnEgkblKdShYO+4XYCybmAnDKuLAlaFYIB6io6vVmy8WY2BVVdVzXPbslaOa6NmD+oPPcQTCx54G2eP61ADFrK8BUq+RqmAIwTiKO43wmIg+BJ77vd7fWrYrrumvAeVX93KKaMgEsttCpkdjligUMAIjIg9b51FPjMmCZZBNVfdxCpzpiFxHptqhmwpTL5WcttaqhxqXTxqTpcbK5G67r/g5cPWD8u77vf73bDl1dXS+LxSLAiW3JwnHDplrgfFgoFE4C/+2287uu/LAwJQPAKwsoAiSTyTPNCL4XalyKlikNEZELLXSqI3ZR1TWLat2Kqb6OBTUueQtYNl+GW+SzE7HLsgDiuu7fVAvxT/dbTh42pjz9E3ju+/7HFqCqOmfGJ1untsUkgHFSC6q1KfAGGHccp2UZjYk9TrX7kAWTsPq+/1REAsA2RXVLMLFtEQni/s3WShKG4S1gHRgxRXVTMTFHgHXjAtRUdaurq6/7+vr+FZGrwBeDg4P38vn8i2bIeZ7Xo6rzQFJVv5+dnX0Yj9WtxUEQ3DHPvj0Mw8V0On3uqOXS6fS5MAwXgXYRyTY2k7YlC6VS6QawJCKdlmXd9zyv56jkPM/rsSzrftz6MLHr2CaYy+XKtm2PxpJRFK0cxW/Sdd1rURStxHK2bY/u1OH6f7bfGk54PBuYtRzrFnAtx7aJvtNxzfob4i2ESvnrjyWOcQAAAABJRU5ErkJggg==",vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAOBSURBVFiFzZixdeJAEIb/WZAiAjqADiiBwAUQOHOg97BlhQQUQEABBIRCZ7+ngMwBBThQARfQgegAv4cTOHYuuFksQBJIYM5/AojVzqcZ7ezsEDNX8IOl/jfAKVUvuTkMw/p6vW4TUUNrXWfmBgAQ0UIptWTmhW3bkeM4y7I2qGiIwzCsbzYbZ7vddoioxcz1k0aIZkQ0c103/FZA3/d7RDQwUES0ZOY5gDkRLYkoBgBmbsqYFoB2YopYKTUsAnoW4Ovra2uz2bwBaMqlSCk1Pid85jXQWvcSsHGtVrt7eHhYXAwYBIHDzCPxSCQeiE5NnDWX1noAoCkef3Jdd1YacDKZDJh5ID/Hnuf1y4Adyvf9EYAeABDR8Pn5eVgYMAiCjtb6TX72Pc8bXwPOKPnwSqnHrPcyFXA6nTY+Pz9/M3P91BNeIt/3ewBGRLSsVqt33W53fjgmNVGvVqt3eefG3wUHABKVMTPXZREe6QgwCAIH/1ZrfK13Lk9iIwLQFI/mA8oqg1KqsOeCIHDSjJySsUVEgzAM9xL/HmDCe1GZrK+1fgEwKnqfpK1IQu1kAjJzBwCUUlddsefI2Nxut5296+ZLGIZ1A2jbdqlEfIls244kebeSYd4Brtdrsw1dVH2UleM4S2aeM3M9wfIFSEQN+XqUi26o+QHLF6DWeleh3J7rn4xtwwIkCtZEsRnnTSIb/kveGN/3/2T8lbtlElHMzDsWoETJn3y6olJKFY7OzoNEtBD6Zt4NZntK+894zvO8UkcJY5uIdnVicpHEMqi0hy6VsZ30dDLEH/LZuiXUgVoAwMzHHsxKlLeS2GwbliPArER5KxmbRDRLbhR7q7hSqcwAQA44N5WxSUR7Z5Q9QMuyQkmW7SAIynixr5R6LHqTVFFtAPFhFbUHKGEeAl91YRF5njcuWaZl1qBHiVryXAygLaevb5XYaCLFe6mAAGBZ1r2EulemQj5Xk8lkAKBHRMtarXaXNiYVsNvtzonInEdGMtFV5ft+zxw7iegpq8uQuRe7rhsS0RAAmHlwzXDLXCOBG+Z1F85pfXSY+ZdsQ4WbPwdztWVBtGVT6J+a66zm0XQ6baxWq3dcsXlkWdZ92kG9FKBRsvmTuBwhp/2W7CFKu25YpI1SuIFpQJm5Yw5ZuQakh1ipVGaWZYVFzzulAI3yWsDizY+bt4BvrR/f5f8LxA8rSSHVBD4AAAAASUVORK5CYII=",se=g=>(Te("data-v-e435d805"),g=g(),Ie(),g),mt={class:"bot-detail-edit-comp"},ft={class:"name-avatar"},kt=se(()=>t("img",{src:Ce,alt:"avatar"},null,-1)),At={class:"title"},wt={class:"title"},yt={class:"title"},bt=se(()=>t("span",null,"*",-1)),Ct=se(()=>t("img",{class:"knowledge-icon",src:Ze,alt:"knowledge"},null,-1)),St={class:"kb-name"},Bt=["onClick"],Tt=se(()=>t("img",{class:"add-knowedge",src:vt,alt:"icon"},null,-1)),It={class:"save"},xt={class:"title"},Ft={class:"chat-setting-form-footer"},Dt=ge({__name:"BotDetailEdit",setup(g){const{curBot:k,knowledgeList:w}=Q(pe()),{QA_List:X}=Q(_e()),{setSelectKnowledgeVisible:R,setCurBot:_}=pe(),{setChatSettingConfigured:d}=Se(),{bots:b,common:Z}=he(),U=y(""),x=y(""),K=y(""),M=Be(()=>x.value.match(/[^a-zA-Z\s]|\p{P}|\w+/g));Je(()=>{console.log("curBot",k.value),U.value=k.value.bot_name,K.value=k.value.welcome_message,x.value=k.value.prompt_setting});const B=async v=>{try{const h=await J(await ee.queryBotInfo({bot_id:v}));console.log("getBotInfo",h),_(h[0])}catch(h){A.error(h.msg||"获取Bot信息失败")}},ae=async()=>{try{await J(await ee.updateBot({bot_id:k.value.bot_id,bot_name:U.value,prompt_setting:x.value,welcome_message:K.value})),B(k.value.bot_id),A.success(b.saveSuccessful)}catch(v){console.log("error--",v),A.error(v.msg||"保存失败，请重试")}},T=async v=>{let h=k.value.kb_ids;console.log("removeKb",v,h),h=h.filter(m=>m!=v);try{await J(await ee.updateBot({bot_id:k.value.bot_id,kb_ids:h})),B(k.value.bot_id),w.value=w.value.map(m=>(m.kb_id===v&&(m.state=m.state===0?1:0),m)),A.success(b.removalSucessful)}catch(m){A.error(m.msg||"请求失败")}},I=y(""),q=async()=>{const v=await I.value.onCheck();Object.hasOwn(v,"errorFields")||(d(v),A.success("应用成功"))};return(v,h)=>{const m=xe,j=ot,G=Fe;return l(),r("div",mt,[t("div",ft,[kt,c(m,{value:s(U),"onUpdate:value":h[0]||(h[0]=C=>te(U)?U.value=C:null),placeholder:s(b).inputBotName,"show-count":"",maxlength:20},null,8,["value","placeholder"])]),t("div",At,u(s(b).roleSetting),1),c(j,{value:s(x),"onUpdate:value":h[1]||(h[1]=C=>te(x)?x.value=C:null),class:"role-setting-input","auto-size":{minRows:7,maxRows:7},rows:7},null,8,["value"]),t("div",{class:Y(["role-setting-length",s(M)&&s(M).length>2e3?"over-length":""])},u(s(M)?s(M).length:0)+" / 2000 ",3),t("div",wt,u(s(b).welcomeMessage),1),c(j,{value:s(K),"onUpdate:value":h[2]||(h[2]=C=>te(K)?K.value=C:null),class:"greeting-input","show-count":"",maxlength:100,placeholder:s(b).inputWelcomMsg,"auto-size":{minRows:6,maxRows:6},rows:6},null,8,["value","placeholder"]),t("div",yt,[z(u(s(b).associatedKb),1),bt]),(l(!0),r(O,null,oe(s(k).kb_ids,(C,ne)=>(l(),r("div",{key:C,class:"knowedge-item knowledge-info"},[Ct,t("div",St,u(s(k).kb_names[ne]),1),t("img",{class:"remove-icon",src:gt,alt:"remove",onClick:le=>T(C)},null,8,Bt)]))),128)),t("div",{class:"knowedge-item add-knowledge-content",onClick:h[3]||(h[3]=C=>s(R)(!0))},[Tt,z(" "+u(s(b).clickAssociatedKb),1)]),t("div",It,[c(G,{class:"save-btn",type:"primary",onClick:ae},{default:H(()=>[z(u(s(b).save),1)]),_:1})]),t("div",xt,u(s(Z).modelSettingTitle),1),c(Ge,{ref_key:"chatSettingFormRef",ref:I,"context-length":s(X).length},null,8,["context-length"]),t("div",Ft,[c(G,{type:"primary",style:{width:"auto"},onClick:q},{default:H(()=>[z(u(s(Z).confirmApplication),1)]),_:1})])])}}}),Lt=ve(Dt,[["__scopeId","data-v-e435d805"]]),P=g=>(Te("data-v-1362e076"),g=g(),Ie(),g),qt={class:"bots-chat-container"},Rt={class:"my-page"},Ut={class:"header"},Kt=P(()=>t("img",{src:Ce,alt:"avatar"},null,-1)),Et={id:"chat",class:"chat"},Vt={class:"ai"},Ht={class:"content"},Qt=P(()=>t("img",{class:"avatar",src:De,alt:"头像"},null,-1)),zt=["innerHTML"],Mt={key:0,class:"user"},Yt=P(()=>t("img",{class:"avatar",src:ut,alt:"头像"},null,-1)),Ot={class:"question-text"},Xt={key:1,class:"ai"},Zt={class:"content"},Wt=P(()=>t("img",{class:"avatar",src:De,alt:"头像"},null,-1)),Nt={key:1},Pt={key:0},jt={key:1},Gt={class:"source-list"},$t={class:"control"},Jt={class:"tips"},eo=["href"],to=["onClick"],oo={class:"source-content"},so=["innerHTML"],ao={class:"score"},no={class:"tips"},lo={key:2,class:"feed-back"},co=["onClick"],io={class:"reload-text"},ro={class:"tools"},uo={class:"stop-placeholder"},po={class:"question-box"},ho={class:"question"},_o={class:"send-plane"},go={key:0,class:"mask"},vo=P(()=>t("img",{src:dt,alt:"icon"},null,-1)),mo=ge({__name:"Chat",props:{chatType:{type:String,default:"edit"},botInfo:{type:Object,default:()=>{}}},setup(g){const k=g,w=he().common,X=he().bots,R=new it(e=>{e&&(_.value[_.value.length-1].answer+=e||"")}),{QA_List:_}=Q(_e()),{chatSettingFormActive:d}=Q(Se()),{copy:b}=st(),{setChatSourceVisible:Z,setSourceType:U,setSourceUrl:x,setTextContent:K}=pt(),{language:M}=Q(je()),B=y(""),ae=Be(()=>{const e=d.value.context;if(e===0)return[];const a=_.value.filter(n=>n.type==="ai");return(e===11?a:a.slice(-e)).map(n=>[n.question,n.answer])}),T=y(!1),I=y([]);let q;const v=y(null),h=y(null),m=()=>{ue(()=>{var e;(e=v.value)==null||e.scrollIntoView(!1)})},j=at((e,a)=>{if(e.like=!e.like,e.unlike=!1,e.like){a.target.parentNode.style.animation="shake ease-in .5s";const f=setTimeout(()=>{clearTimeout(f),a.target.parentNode.style.animation=""},600)}},800),G=e=>{e.unlike=!e.unlike,e.like=!1},C=e=>{b(e.answer).then(()=>{e.copied=!e.copied,A.success(w.copySuccess,1);const a=setTimeout(()=>{clearTimeout(a),e.copied=!e.copied},1e3)}).catch(()=>{A.error(w.copyFailed,1)})},ne=e=>{_.value.push({question:e,type:"user"}),m()},le=e=>{_.value.push({answer:"",question:e,onlySearch:d.value.capabilities.onlySearch,type:"ai",copied:!1,like:!1,unlike:!1,source:[],picList:null,showTools:!1})},W=new Pe,Le=()=>{q&&q.abort(),R.done(),T.value=!1,_.value[_.value.length-1].showTools=!0},ce=()=>{var f;if(!B.value.length){A.warn("正在聊天中...请等待结束");return}if(!ze()){A.error("模型设置错误，请先检查模型配置");return}const e=B.value;B.value="",ne(e),T.value=!0,(f=v.value)==null||f.scrollIntoView(!0),q=new AbortController;const a={"Content-Type":"application/json",Accept:["text/event-stream","application/json"],"Transfer-Encoding":"chunked",Connection:"keep-alive"};rt(Ne+"/local_doc_qa/local_doc_chat",{method:"POST",headers:a,openWhenHidden:!0,body:JSON.stringify({user_id:We,bot_id:k.botInfo.bot_id,history:ae.value,question:e,streaming:d.value.capabilities.onlySearch===!1,networking:d.value.capabilities.networkSearch,product_source:"saas",rerank:d.value.capabilities.rerank,only_need_search_results:d.value.capabilities.onlySearch,hybrid_search:d.value.capabilities.mixedSearch,max_token:d.value.maxToken,api_base:d.value.apiBase,api_key:d.value.apiKey,model:d.value.apiModelName,api_context_length:d.value.apiContextLength,chunk_size:d.value.chunkSize,top_p:d.value.top_P,top_k:d.value.top_K,temperature:d.value.temperature}),signal:q.signal,onopen(n){console.log("open"),W.addChatSetting(d.value),n.ok&&n.headers.get("content-type")==="text/event-stream"?(console.log("everything's good"),le(e),R.start()):n.headers.get("content-type")==="application/json"&&le(e)},onmessage(n){var o;console.log("message");const i=JSON.parse(n.data);if(console.log(i),(i==null?void 0:i.code)==200&&(i!=null&&i.response)&&i.msg==="success")R.add(i==null?void 0:i.response.replaceAll(`
`,"<br/>")),m();else{const F=i.time_record.time_usage;delete F.retriever_search_by_milvus,W.addTime(i.time_record.time_usage),W.addToken(i.time_record.token_usage),W.addDate(Date.now())}(o=i==null?void 0:i.source_documents)!=null&&o.length&&(_.value[_.value.length-1].source=i==null?void 0:i.source_documents)},onclose(n){console.log("close",n),R.done(),q.abort(),T.value=!1,_.value[_.value.length-1].showTools=!0,_.value.at(-1).itemInfo=W.getChatInfo(),ue(()=>{m()})},onerror(n){throw console.log("error",n),R.done(),q.abort(),T.value=!1,_.value[_.value.length-1].showTools=!0,ue(()=>{m()}),n}})},qe=e=>{console.log("reAnswer"),B.value=e.question,ce()},Re=(e,a)=>{e.source[a].showDetailDataSource=!1},Ue=(e,a)=>{e.source[a].showDetailDataSource=!e.source[a].showDetailDataSource},Ke=e=>{I.value.push(e)},Ee=e=>{I.value=I.value.filter(a=>a!==e)},{showModal:me}=Q(nt()),{clearQAList:Ve}=_e(),ie=y(!1),re=y(""),$=y(""),He=()=>{$.value="download",me.value=!0,re.value=w.saveTip},Qe=async()=>{if(ie.value=!0,$.value==="download"){console.log("download");try{const e=document.getElementById("chat-ul"),f=(await ct(e,{useCORS:!0})).toDataURL("image/png"),n=document.createElement("a");n.style.display="none",n.href=f,n.setAttribute("download","chat-shot.png"),typeof n.download>"u"&&n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(f),A.success(X.downloadSuccessful),Promise.resolve()}catch(e){console.log(e),A.error(e.message||e.msg||"出错了")}}else $.value==="delete"&&(console.log("delete"),Ve());$.value="",re.value="",ie.value=!1,me.value=!1},ze=()=>!!(d.value.apiKey&&d.value.apiBase&&d.value.apiModelName);let fe=["pdf","docx","xlsx","txt","jpg","png","jpeg"];const ke=e=>{if(!e)return!1;const a=e.split(".");if(a.length){const f=a.pop();return!!fe.includes(f)}else return!1},Me=e=>{console.log("handleChatSource",e),ke(e.file_name)&&Ye(e)};async function Ye(e){try{x(null);const a=await J(await ee.getFile({file_id:e.file_id}));console.log("queryFile",a);const f=e.file_name.split(".").pop(),n=Xe(f);if(console.log("b64Type",n),U(f),x(`data:${n};base64,${a.base64_content}`),f==="txt"){const i=atob(a.base64_content),o=decodeURIComponent(escape(i));console.log("decodedTxt",o),K(o),Z(!0)}else Z(!0)}catch(a){A.error(a.msg||"获取文件失败")}}let Oe=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","image/jpeg","image/png","image/jpeg"];function Xe(e){const a=fe.indexOf(e);return Oe[a]}return m(),(e,a)=>{const f=_t,n=Fe,i=xe;return l(),r(O,null,[t("div",qt,[t("div",Rt,[t("div",Ut,[Kt,z(" "+u(g.botInfo.bot_name),1)]),t("div",Et,[t("ul",{id:"chat-ul",ref_key:"scrollDom",ref:v},[t("div",Vt,[t("div",Ht,[Qt,t("p",{class:"question-text",innerHTML:g.botInfo.welcome_message},null,8,zt)])]),(l(!0),r(O,null,oe(s(_),(o,F)=>{var Ae,we,ye;return l(),r("li",{key:F},[o.type==="user"?(l(),r("div",Mt,[Yt,t("p",Ot,u(o.question),1)])):(l(),r("div",Xt,[t("div",Zt,[Wt,o.onlySearch?V("",!0):(l(),r("p",{key:0,class:Y(["question-text",[!o.source.length&&!((Ae=o==null?void 0:o.picList)!=null&&Ae.length)?"change-radius":"",o.showTools?"":"flashing"]])},[o.answer?(l(),be(ht,{key:0,content:o.answer},null,8,["content"])):(l(),r("span",Nt,u(o.answer),1)),Object.keys(((we=o==null?void 0:o.itemInfo)==null?void 0:we.tokenInfo)||{}).length?(l(),be($e,{key:2,"chat-item-info":o.itemInfo},null,8,["chat-item-info"])):V("",!0)],2))]),(ye=o==null?void 0:o.picList)!=null&&ye.length?(l(!0),r(O,{key:0},oe(o.picList,(p,E)=>(l(),r("div",{key:p+E,class:Y(["data-picList",!o.source.length&&E+1===o.picList.length?"picList-radius":""])},[c(f,{width:150,src:p,class:"responsive-image"},null,8,["src"])],2))),128)):V("",!0),o.source.length?(l(),r(O,{key:1},[t("div",{class:Y(["source-total",s(I).includes(F)?"":"source-total-last"])},[s(M)==="zh"?(l(),r("span",Pt,"找到了"+u(o.source.length)+"个信息来源：",1)):(l(),r("span",jt,"Found "+u(o.source.length)+" source of information",1)),D(c(S,{name:"down",onClick:p=>Ke(F)},null,8,["onClick"]),[[L,!s(I).includes(F)]]),D(c(S,{name:"up",onClick:p=>Ee(F)},null,8,["onClick"]),[[L,s(I).includes(F)]])],2),D(t("div",Gt,[(l(!0),r(O,null,oe(o.source,(p,E)=>(l(),r("div",{key:E,class:"data-source"},[D(t("p",$t,[t("span",Jt,u(s(w).dataSource)+u(E+1)+":",1),p.file_id.startsWith("http")?(l(),r("a",{key:0,href:p.file_id,target:"_blank"},u(p.file_name),9,eo)):(l(),r("span",{key:1,class:Y(["file",ke(p.file_name)?"filename-active":""]),onClick:N=>Me(p)},u(p.file_name),11,to)),D(c(S,{name:"iconup",onClick:N=>Re(o,E)},null,8,["onClick"]),[[L,p.showDetailDataSource]]),D(c(S,{name:"icondown",onClick:N=>Ue(o,E)},null,8,["onClick"]),[[L,!p.showDetailDataSource]])],512),[[L,p.file_name]]),c(tt,{name:"sourceitem"},{default:H(()=>{var N;return[D(t("div",oo,[t("p",{innerHTML:(N=p.content)==null?void 0:N.replaceAll(`
`,"<br/>")},null,8,so),t("p",ao,[t("span",no,u(s(w).correlation),1),z(u(p.score),1)])],512),[[L,p.showDetailDataSource]])]}),_:2},1024)]))),128))],512),[[L,s(I).includes(F)]])],64)):V("",!0),o.showTools?(l(),r("div",lo,[t("div",{class:"reload-box",onClick:p=>qe(o)},[c(S,{name:"reload"}),t("span",io,u(s(w).regenerate),1)],8,co),t("div",ro,[c(S,{style:de({color:o.copied?"#4D71FF":""}),name:"copy",onClick:p=>C(o)},null,8,["style","onClick"]),c(S,{style:de({color:o.like?"#4D71FF":""}),name:"like",onClick:p=>s(j)(o,p)},null,8,["style","onClick"]),c(S,{style:de({color:o.unlike?"#4D71FF":""}),name:"unlike",onClick:p=>G(o)},null,8,["style","onClick"])])])):V("",!0)]))])}),128)),D(t("div",uo,null,512),[[L,s(T)]]),D(t("div",{ref_key:"stopBtn",ref:h,class:"stop-btn"},[c(n,{onClick:Le},{icon:H(()=>[c(S,{name:"stop",class:Y(s(T)?"loading":"")},null,8,["class"])]),default:H(()=>[z(" "+u(s(w).stop),1)]),_:1})],512),[[L,s(T)]])],512)]),t("div",po,[t("div",ho,[g.chatType==="share"?(l(),r("span",{key:0,class:"download",onClick:He},[c(S,{name:"chat-download"})])):V("",!0),c(i,{value:s(B),"onUpdate:value":a[0]||(a[0]=o=>te(B)?B.value=o:null),"max-length":"200",placeholder:s(w).problemPlaceholder,onKeyup:et(ce,["enter"])},{suffix:H(()=>[t("div",_o,[c(n,{type:"primary",disabled:s(T),onClick:ce},{default:H(()=>[c(S,{name:"sendplane"})]),_:1},8,["disabled"])])]),_:1},8,["value","placeholder"])])])]),!g.botInfo.kb_ids||!g.botInfo.kb_ids.length?(l(),r("div",go,[vo,t("p",null,u(s(X).bindKbtoPreview),1)])):V("",!0)]),c(lt,{content:s(re),"confirm-loading":s(ie),onOk:Qe},null,8,["content","confirm-loading"])],64)}}}),fo=ve(mo,[["__scopeId","data-v-1362e076"]]),ko={class:"edit-detail"},Ao={class:"bots-chat-page"},wo=ge({__name:"EditDetail",setup(g){const{curBot:k}=Q(pe());return(w,X)=>(l(),r("div",ko,[c(Lt),t("div",Ao,[c(fo,{"bot-info":s(k),"chat-type":"edit"},null,8,["bot-info"])])]))}}),Xo=ve(wo,[["__scopeId","data-v-27fa0036"]]);export{Xo as default};
